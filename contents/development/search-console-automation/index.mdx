---
title: 'Search Console ì§€í‘œ ìë™í™” - ê°œë°œìì˜ ì˜ì¡´ì„± ì¤„ì´ê¸°'
description: 'Search Console ì§€í‘œ ìë™í™”ë¥¼ í†µí•´ ê°œë°œìì˜ ì˜ì¡´ì„±ì„ ì—†ì•¤ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤.'
date: '2025-02-01'
slug: 'search-console-automation'
thumbnail: './images/search-console-automation-thumbnail.png'
thumbnail_alt: 'search-console-automation'
category: 'development'
type: 'post'
---

<Callout>
  ğŸ’¡ Search Console ì§€í‘œ ìë™í™”ë¥¼ í†µí•´ ê°œë°œìì˜ ì˜ì¡´ì„±ì„ ì—†ì•¤ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤.
</Callout>

ì‚¬ë‚´ì—ì„œ SEO ê´€ë ¨ëœ ì´ìŠˆë“¤ì´ ë§ì´ ë°œìƒí•˜ë©´ì„œ SEO ì‘ì—…ì˜ ì¤‘ìš”ì„±ì´ ë†’ì•„ì¡Œë‹¤.

ì´ì— ê´€ë ¨ ì§€í‘œë¡œ Search Console ìˆ˜ì¹˜ë¥¼ ì¼ì£¼ì¼ì— í•œ ë²ˆì”© ê³µìœ í•˜ë©´ ì¢‹ê² ë‹¤ëŠ” ìš”êµ¬ ìƒí™©ì´ ìƒê²¼ë‹¤.

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-reminder.png"
  alt="Search Console Reminder"
/>

<br />

SEOë¥¼ ì¤‘ìš”í•˜ê²Œ ë‹¤ë£¨ëŠ” í”„ë¡œì íŠ¸ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë“¤ì´ ì§€í‘œë¥¼ íŒŒì•…í•´ì„œ ìŠ¤ë ˆë“œì—ì„œ ì •ë³´ë¥¼ ê³µìœ í–ˆë‹¤.

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-thread-list.png"
  alt="Search Console ìŠ¤ë ˆë“œ ëª©ë¡"
/>

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-thread-content.png"
  alt="Search Console ìŠ¤ë ˆë“œ ë‚´ìš©"
/>

<br />

í•´ë‹¹ í”Œë¡œìš°ë¥¼ ê²½í—˜í•´ë³´ë‹ˆ ë‹¤ìŒê³¼ ê°™ì€ ì ë“¤ì„ ëŠë¼ê²Œ ë˜ì—ˆë‹¤.

<br />

- ê°œë°œìê°€ ì˜ì¡´í•  í•„ìš”ê°€ ì—†ëŠ” ì‘ì—…ì´ë‹¤. í•´ë‹¹ ì‘ì—…ì„ ë°˜ë“œì‹œ ê°œë°œìê°€ í•´ì•¼í• ê¹Œ?
- í•´ë‹¹ ì§€í‘œë¥¼ ìˆ˜ì§‘í•˜ê³  ë¹„êµí•˜ëŠ” ì‘ì—…ì—ì„œ ì†Œìš”ë˜ëŠ” ë¹„ìš©ì´ ì•„ì‰½ê²Œ ë‹¤ê°€ì˜¨ë‹¤.
- ì‚¬ëŒì´ í•˜ë‚˜ì”© ì§€í‘œë¥¼ í™•ì¸í•˜ê¸°ì— ì‹¤ìˆ˜í•  í™•ë¥ ì´ ë†’ì•„ ë³´ì¸ë‹¤.

<br />

ì´ì— í•´ë‹¹ í”Œë¡œìš°ë¥¼ ìë™í™”ì‹œí‚¬ ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ë¹ ë¥´ê²Œ ë§ˆë ¨í•˜ê³ ì í–ˆë‹¤.

## Google Search Console API ì„¸íŒ…í•˜ê¸°

ë¸”ë¡œê·¸ë¥¼ ì‹¤í—˜ ëŒ€ìƒìœ¼ë¡œ ì‚¼ì..! ğŸ˜‡

í˜„ì¬ ìš°ë¦¬ì˜ ê´€ì‹¬ì‚¬ëŠ” Search Console ê´€ë ¨ ì§€í‘œë¡œ ì‹¤ì  í•­ëª©ì— 4ê°œì˜ ì£¼ìš” ì§€í‘œê°€ ì¡´ì¬í•œë‹¤.

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-data.png"
  alt="Search Console ì§€í‘œ"
/>

<br />

- ì´ í´ë¦­ìˆ˜: ì‚¬ìš©ìê°€ í´ë¦­ì„ í†µí•´ ì‚¬ì´íŠ¸ë¡œ ì—°ê²°ëœ íšŸìˆ˜
- ì´ ë…¸ì¶œìˆ˜: ì‚¬ìš©ìê°€ ê²€ìƒ‰ê²°ê³¼ì—ì„œ ì‚¬ì´íŠ¸ë¡œ ì—°ê²°ë˜ëŠ” ë§í¬ë¥¼ ë³¸ íšŸìˆ˜
- í‰ê·  CTR: í´ë¦­ìœ¼ë¡œ ì´ì–´ì§„ ë…¸ì¶œìˆ˜ì˜ ë¹„ìœ¨
- í‰ê·  ê²Œì¬ìˆœìœ„: ì‚¬ì´íŠ¸ê°€ ê²€ìƒ‰ê²°ê³¼ì— í‘œì‹œë˜ëŠ” í‰ê· ì ì¸ ìˆœìœ„

<br />

ì´ ì§€í‘œë¥¼ ì–´ë–»ê²Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì„ì§€ ê³ ë¯¼í–ˆì„ ë•Œ êµ¬ê¸€ì—ì„œ ê´€ë ¨ API([Search Console API](https://developers.google.com/webmaster-tools?hl=ko))ë¥¼ ì œê³µí•´ì¤€ë‹¤.

í•´ë‹¹ APIëŠ” ë¬´ë£Œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ì‚¬ìš©ëŸ‰ í•œë„ê°€ ì¡´ì¬í•˜ì§€ë§Œ ì¼ì£¼ì¼ì— í•œ ë²ˆì”©ë§Œ í˜¸ì¶œí•  ê²ƒì´ê¸°ì— ê±±ì •ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### ì„œë¹„ìŠ¤ ê³„ì • ìƒì„±í•˜ê¸°

APIì— ëŒ€í•œ ì ‘ê·¼ì„ í™œì„±í™”í•˜ê¸° ìœ„í•´ ì„œë¹„ìŠ¤ ê³„ì •ì„ ìƒì„±í•˜ì.

<br />

í•´ë‹¹ ê³¼ì • ìì²´ëŠ” [ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ êµ¬ê¸€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ í™œìš©í•˜ê¸°](https://jgjgill-blog.netlify.app/post/google-spreadsheet-with-javascript/)ì™€ ìœ ì‚¬í•˜ë‹¤.

[**Google Developers Console**](https://console.developers.google.com/)ì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œë‹¤.

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-account-1.png"
  alt="Search Console ê³„ì • 1"
/>

<br />

Google Search Console APIë¥¼ ì‚¬ìš© ì„¤ì •í•œë‹¤.

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-account-2.png"
  alt="Search Console ê³„ì • 2"
/>

<br />

`IAM ë° ê´€ë¦¬ì / ì„œë¹„ìŠ¤ ê³„ì •` ê²½ë¡œì—ì„œ ì„œë¹„ìŠ¤ ê³„ì •ì„ ë§Œë“ ë‹¤.

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-account-3.png"
  alt="Search Console ê³„ì • 3"
/>

<br />

ìƒì„±ëœ ê³„ì •ì—ì„œ í‚¤ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.

ìƒì„±ëœ ê°’ë“¤ë¡œ ì½”ë“œì—ì„œ ì„œë¹„ìŠ¤ ê³„ì •ìœ¼ë¡œ Search Console APIë¥¼ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-account-4.png"
  alt="Search Console ê³„ì • 4"
/>

<br />

### ì„œì¹˜ ì½˜ì†”ì— ì„œë¹„ìŠ¤ ê³„ì • ì¶”ê°€í•˜ê¸°

ì„œë¹„ìŠ¤ ê³„ì •ì„ ì„œì¹˜ ì½˜ì†”ì— ì¶”ê°€í•˜ì.

`ì„¤ì • â†’ ì‚¬ìš©ì ë° ê¶Œí•œ` ì—ì„œ ì‚¬ìš©ì ì¶”ê°€ë¥¼ í´ë¦­í•´ì„œ ìƒì„±í•œ ì„œë¹„ìŠ¤ ê³„ì •ì„ ì¶”ê°€í•´ì¤€ë‹¤.

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-account-5.png"
  alt="Search Console ê³„ì • 5"
/>

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-account-6.png"
  alt="Search Console ê³„ì • 6"
/>
<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-account-7.png"
  alt="Search Console ê³„ì • 7"
/>

<br />

ì—¬ê¸°ê¹Œì§€ ë§ˆë¬´ë¦¬í•˜ë©´ êµ¬ê¸€ ê´€ë ¨ ì„¸íŒ… ì‘ì—…ì€ ëì´ ë‚œë‹¤.

## í”„ë¡œì íŠ¸ êµ¬ì„±í•˜ê¸°

ê°€ì¥ ê°„ë‹¨í•œ í˜•íƒœë¡œ ë¹ ë¥´ê²Œ êµ¬í˜„í•´ë³´ì.

ë‹¤ìŒ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì„¤ì¹˜í•´ì¤€ë‹¤.

<br />

```bash
pnpm i -D @slack/webhook @types/node dayjs dotenv google-auth-library googleapis ts-node typescript
```

<br />

- Google Search Console ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬: `google-auth-library`, `googleapis`
- Slack ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬: `@slack/webhook`

### Search Console API í˜¸ì¶œí•˜ê¸°

`google-auth-library`ë¥¼ í†µí•´ ê³„ì •ì˜ ê¶Œí•œì„ ì–»ëŠ”ë‹¤.

<br />

```ts
import dotenv from 'dotenv'

const clientEmail = process.env.GOOGLE_CLIENT_EMAIL // ì•ì„œ ìƒì„±í•œ ì„œë¹„ìŠ¤ ê³„ì • ì´ë©”ì¼
const privateKey = process.env.GOOGLE_PRIVATE_KEY // ì•ì„œ ìƒì„±í•œ ì„œë¹„ìŠ¤ ê³„ì • í‚¤

const auth = new JWT({
  email: clientEmail,
  key: privateKey,
  scopes: ['https://www.googleapis.com/auth/webmasters.readonly'],
})
```

<br />

í•´ë‹¹ ê³„ì •ìœ¼ë¡œ `googleapis`ì—ì„œ Search Console API ì§€í‘œë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

<br />

```ts
import { google } from 'googleapis'
import { JWT } from 'google-auth-library'

const siteUrl = 'https://jgjgill-blog.netlify.app'

const searchconsole = google.searchconsole({ version: 'v1', auth })

const searchAnalytics = await searchconsole.searchanalytics.query({
  siteUrl,
  requestBody: {
    startDate: startDate.format('YYYY-MM-DD'),
    endDate: endDate.format('YYYY-MM-DD'),
    dimensions: ['date'],
    type: 'web',
  },
})
```

<br />

ì´ì œë¶€í„°ëŠ” ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ ì½”ë“œë¥¼ êµ¬ì„±í•˜ë©´ ëœë‹¤.

<br />

í˜„ì¬ ìš°ë¦¬ì˜ ìš”êµ¬ ì‚¬í•­ì€ ì¼ì£¼ì¼ê°„ì˜ ì§€í‘œ ë¹„êµì´ë‹¤.

êµ¬í˜„ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

<br />

```ts
import { google } from 'googleapis'
import { JWT } from 'google-auth-library'
import dayjs from 'dayjs'
import dotenv from 'dotenv'

dotenv.config()

const clientEmail = process.env.GOOGLE_CLIENT_EMAIL
const privateKey = process.env.GOOGLE_PRIVATE_KEY
const siteUrl = 'https://jgjgill-blog.netlify.app'
const searchConolseUrl =
  'https://search.google.com/search-console?resource_id=https%3A%2F%2Fjgjgill-blog.netlify.app%2F'
const projectName = 'jgjgill'

async function fetchSearchData(startDate: dayjs.Dayjs, endDate: dayjs.Dayjs) {
  const auth = new JWT({
    email: clientEmail,
    key: privateKey,
    scopes: ['https://www.googleapis.com/auth/webmasters.readonly'],
  })

  const searchconsole = google.searchconsole({ version: 'v1', auth })

  const searchAnalytics = await searchconsole.searchanalytics.query({
    siteUrl,
    requestBody: {
      startDate: startDate.format('YYYY-MM-DD'),
      endDate: endDate.format('YYYY-MM-DD'),
      dimensions: ['date'],
      type: 'web',
    },
  })

  return searchAnalytics.data.rows || []
}

export async function testSearchConsole() {
  // ì´ë²ˆ ì£¼ ë°ì´í„° (3ì¼ ì „ë¶€í„° 9ì¼ ì „ê¹Œì§€)
  const currentEndDate = dayjs().subtract(3, 'day')
  const currentStartDate = currentEndDate.subtract(6, 'day')

  // ì§€ë‚œ ì£¼ ë°ì´í„° (10ì¼ ì „ë¶€í„° 16ì¼ ì „ê¹Œì§€)
  const previousEndDate = currentStartDate.subtract(1, 'day')
  const previousStartDate = previousEndDate.subtract(6, 'day')

  const [currentWeekData, previousWeekData] = await Promise.all([
    fetchSearchData(currentStartDate, currentEndDate),
    fetchSearchData(previousStartDate, previousEndDate),
  ])

  // ì£¼ê°„ í•©ê³„ ê³„ì‚°
  const currentWeekSummary = { clicks: 0, impressions: 0, ctr: 0, position: 0 }
  const previousWeekSummary = {
    clicks: 0,
    impressions: 0,
    ctr: 0,
    position: 0,
  }

  currentWeekData.forEach((row) => {
    currentWeekSummary.clicks += row.clicks || 0
    currentWeekSummary.impressions += row.impressions || 0
    currentWeekSummary.ctr += row.ctr || 0
    currentWeekSummary.position += row.position || 0
  })

  previousWeekData.forEach((row) => {
    previousWeekSummary.clicks += row.clicks || 0
    previousWeekSummary.impressions += row.impressions || 0
    previousWeekSummary.ctr += row.ctr || 0
    previousWeekSummary.position += row.position || 0
  })

  // í‰ê· ê°’ ê³„ì‚°
  currentWeekSummary.ctr = currentWeekSummary.ctr / currentWeekData.length
  currentWeekSummary.position =
    (currentWeekSummary.position ?? 0) / currentWeekData.length
  previousWeekSummary.ctr = previousWeekSummary.ctr / previousWeekData.length
  previousWeekSummary.position = previousWeekSummary.position / previousWeekData.length

  // ì¦ê°ë¥  ê³„ì‚°
  const changes = {
    clicks: (
      ((currentWeekSummary.clicks - previousWeekSummary.clicks) /
        previousWeekSummary.clicks) *
      100
    ).toFixed(1),
    impressions: (
      ((currentWeekSummary.impressions - previousWeekSummary.impressions) /
        previousWeekSummary.impressions) *
      100
    ).toFixed(1),
    ctr: (
      ((currentWeekSummary.ctr - previousWeekSummary.ctr) / previousWeekSummary.ctr) *
      100
    ).toFixed(1),
    position: (
      ((previousWeekSummary.position - currentWeekSummary.position) /
        previousWeekSummary.position) *
      100
    ).toFixed(1),
  }

  return {
    currentStartDate,
    currentEndDate,
    previousEndDate,
    previousStartDate,
    currentWeekSummary,
    previousWeekSummary,
    changes,
    searchConolseUrl,
    projectName,
  }
}

testSearchConsole()
```

<br />

ëŒ€ëµ ë‹¤ìŒê³¼ ê°™ì€ ë°ì´í„°ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-code-data-1.png"
  alt="Search Console ì½”ë“œ ì§€í‘œ 1"
/>

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-code-data-2.png"
  alt="Search Console ì½”ë“œ ì§€í‘œ 2"
/>

<br />

### Slack Webhook í™œìš©í•˜ê¸°

ë°ì´í„°ë¥¼ ìŠ¬ë™ê³¼ ì—°ë™í•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤.

ì—­ì‹œë‚˜ ê°€ì¥ ê°„ë‹¨í•œ í˜•íƒœë¡œ êµ¬í˜„í•  ê²ƒì´ë‹¤.

<br />

`@slack/webhook` ì„ í†µí•œ Incoming Webhook ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•´ë³´ì.

[api.slack](https://api.slack.com/apps)ì—ì„œ ì•± (From scratch)ì„ ìƒì„±í•œë‹¤.

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-slack-1.png"
  alt="Search Console ìŠ¬ë™ 1"
/>

<br />

`Features â†’ Incoming Webhooks` ê²½ë¡œì—ì„œ í•´ë‹¹ ê¸°ëŠ¥ì„ í™œì„±í™”ì‹œì¼œì£¼ë©´ ì›¹í›… URLì´ êµ¬ì„±ëœë‹¤.

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-slack-2.png"
  alt="Search Console ìŠ¬ë™ 2"
/>

<br />

ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

<br />

```ts
import { IncomingWebhook } from '@slack/webhook'
import { testSearchConsole } from './test'
import dotenv from 'dotenv'
import dayjs from 'dayjs'

dotenv.config()

const webhook = new IncomingWebhook(process.env.SLACK_WEBHOOK_URL!)

async function sendWebhook() {
  try {
    const {
      currentEndDate,
      currentStartDate,
      previousEndDate,
      previousStartDate,
      currentWeekSummary,
      previousWeekSummary,
      changes,
      searchConolseUrl,
      projectName,
    } = await testSearchConsole()

    await webhook.send({
      blocks: [
        {
          type: 'header',
          text: {
            type: 'plain_text',
            text: `ğŸ“Š Search Console ì£¼ê°„ ë¦¬í¬íŠ¸ - ${projectName}`,
            emoji: true,
          },
        },
        {
          type: 'section',
          text: {
            type: 'mrkdwn',
            text: `ğŸ” <${searchConolseUrl}|Search Consoleì—ì„œ ë³´ê¸°>`,
          },
        },
        {
          type: 'section',
          text: {
            type: 'mrkdwn',
            text: `*ì¸¡ì • ê¸°ê°„*\nì´ë²ˆ ì£¼: ${currentStartDate.format(
              'YYYY-MM-DD',
            )} ~ ${currentEndDate.format(
              'YYYY-MM-DD',
            )}\nì§€ë‚œ ì£¼: ${previousStartDate.format(
              'YYYY-MM-DD',
            )} ~ ${previousEndDate.format('YYYY-MM-DD')}`,
          },
        },
        {
          type: 'section',
          fields: [
            {
              type: 'mrkdwn',
              text: `*ì´ í´ë¦­ìˆ˜*\nì´ë²ˆ ì£¼: ${currentWeekSummary.clicks}íšŒ\nì§€ë‚œ ì£¼: ${
                previousWeekSummary.clicks
              }íšŒ\në³€í™”ëŸ‰: ${changes.clicks}% ${
                Number(changes.clicks) > 0 ? 'ğŸ“ˆ' : 'ğŸ“‰'
              }`,
            },
            {
              type: 'mrkdwn',
              text: `*ì´ ë…¸ì¶œìˆ˜*\nì´ë²ˆ ì£¼: ${
                currentWeekSummary.impressions
              }íšŒ\nì§€ë‚œ ì£¼: ${previousWeekSummary.impressions}íšŒ\në³€í™”ëŸ‰: ${
                changes.impressions
              }% ${Number(changes.impressions) > 0 ? 'ğŸ“ˆ' : 'ğŸ“‰'}`,
            },
          ],
        },
        {
          type: 'section',
          fields: [
            {
              type: 'mrkdwn',
              text: `*í‰ê·  CTR*\nì´ë²ˆ ì£¼: ${(currentWeekSummary.ctr * 100).toFixed(
                2,
              )}%\nì§€ë‚œ ì£¼: ${(previousWeekSummary.ctr * 100).toFixed(2)}%\në³€í™”ëŸ‰: ${
                changes.ctr
              }% ${Number(changes.ctr) > 0 ? 'ğŸ“ˆ' : 'ğŸ“‰'}`,
            },
            {
              type: 'mrkdwn',
              text: `*í‰ê·  ê²€ìƒ‰ìˆœìœ„*\nì´ë²ˆ ì£¼: ${currentWeekSummary.position.toFixed(
                1,
              )}ìœ„\nì§€ë‚œ ì£¼: ${previousWeekSummary.position.toFixed(1)}ìœ„\në³€í™”ëŸ‰: ${
                changes.position
              }% ${Number(changes.position) > 0 ? 'â¬†ï¸' : 'â¬‡ï¸'}`,
            },
          ],
        },
        {
          type: 'section',
          fields: [
            {
              type: 'mrkdwn',
              text: `*í‰ê·  CTR*\n${(currentWeekSummary.ctr * 100).toFixed(2)}% (${
                changes.ctr
              }% ${Number(changes.ctr) > 0 ? 'ğŸ“ˆ' : 'ğŸ“‰'})`,
            },
            {
              type: 'mrkdwn',
              text: `*í‰ê·  ê²€ìƒ‰ìˆœìœ„*\n${currentWeekSummary.position.toFixed(1)}ìœ„ (${
                changes.position
              }% ${Number(changes.position) > 0 ? 'â¬†ï¸' : 'â¬‡ï¸'})`,
            },
          ],
        },
        {
          type: 'context',
          elements: [
            {
              type: 'mrkdwn',
              text: `ğŸ•’ ìƒì„±: ${dayjs().format('YYYY-MM-DD HH:mm:ss')}`,
            },
          ],
        },
      ],
    })

    console.log('Search Console ë¦¬í¬íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.')
  } catch (error) {
    console.error('ë©”ì‹œì§€ ì „ì†¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error)
    throw error
  }
}

sendWebhook()
```

<br />

í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ ìŠ¬ë™ì—ì„œ ë‹¤ìŒ ë©”ì‹œì§€ê°€ ìƒì„±ëœë‹¤.

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-slack-3.png"
  alt="Search Console ìŠ¬ë™ 3"
/>

<br />

### ìë™í™” ì ìš©í•˜ê¸°

ëª¨ë“  í”Œë¡œìš°ê°€ ë§ˆë¬´ë¦¬ë˜ì—ˆë‹¤.

ì´ì œ í•´ë‹¹ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¼ì • ì‹œê¸°ë§ˆë‹¤ ìë™ìœ¼ë¡œ ì‹¤í–‰ì‹œì¼œì£¼ë©´ ëœë‹¤.

<br />

`Github Actions`ì„ í™œìš©í•˜ì.

ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

<br />

```YAML
name: Search Console Weekly Report

on:
  schedule:
    - cron: "30 16 * * 3" # í•œêµ­ ì‹œê°„(KST): ë§¤ì£¼ ëª©ìš”ì¼ ì˜¤ì „ 1ì‹œ 30ë¶„
  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰ ì˜µì…˜ ì¶”ê°€

jobs:
  send-report:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20"

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 8
          run_install: false

      - name: Get pnpm store directory
        shell: bash
        run: |
          echo "STORE_PATH=$(pnpm store path --silent)" >> $GITHUB_ENV

      - name: Setup pnpm cache
        uses: actions/cache@v3
        with:
          path: ${{ env.STORE_PATH }}
          key: ${{ runner.os }}-pnpm-store-${{ hashFiles('**/pnpm-lock.yaml') }}
          restore-keys: |
            ${{ runner.os }}-pnpm-store-

      - name: Install dependencies
        run: pnpm install

      - name: Run report script
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
          GOOGLE_CLIENT_EMAIL: ${{ secrets.GOOGLE_CLIENT_EMAIL }}
          GOOGLE_PRIVATE_KEY: ${{ secrets.GOOGLE_PRIVATE_KEY }}
        run: pnpm tsx webhook-test.ts
```

<br />

#### actions íƒ€ì„ì¡´ ì´ìŠˆ

`GitHub Actions`ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ UTC íƒ€ì„ì¡´ì—ì„œ ì‹¤í–‰ëœë‹¤.

ê·¸ë˜ì„œ `dayjs`ë¥¼ ì‚¬ìš©í•  ë•Œ ì˜ˆìƒê³¼ ë‹¤ë¥¸ ì‹œê°„ì´ ë‚˜ì˜¬ ìˆ˜ ìˆë‹¤.

<br />

`dayjs.tz.setDefault("Asia/Seoul")`ì„ í†µí•´ KST íƒ€ì„ì¡´ì„ ëª…ì‹œì ì„ ì„¤ì •í•´ì•¼ í•œë‹¤.

ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ì¶”ê°€í•´ì£¼ì.

<br />

```ts
import utc from 'dayjs/plugin/utc'
import timezone from 'dayjs/plugin/timezone'

dayjs.extend(utc)
dayjs.extend(timezone)
dayjs.tz.setDefault('Asia/Seoul')

dayjs().tz().subtract(3, 'day')
```

<br />

## í™•ì¥ì„± ê³ ë ¤í•˜ê¸°

ì´ë ‡ê²Œ ì •ë§ ê°„ë‹¨í•œ í˜•íƒœë¡œ êµ¬í˜„ì„ ë§ˆë¬´ë¦¬í•  ìˆ˜ ìˆì—ˆë‹¤.

ì‘ì—… ë‚´ìš©ì„ ìŠ¤í¬ëŸ¼ì— ê³µìœ í•˜ë©´ì„œ ìë™í™” ì‘ì—…ì˜ í•„ìš”ì„±ì„ í™•ì¸ë°›ê³ ì í–ˆë‹¤.

<br />

í˜„ì¬ êµ¬í˜„ì€ ë¹ ë¥¸ ê²€ì¦ê³¼ ì‹¤í—˜ì„ ìœ„í•´ í•˜ë‚˜ì˜ í”„ë¡œì íŠ¸ë§Œì„ íƒ€ê²Ÿìœ¼ë¡œ ë§Œë“¤ì—ˆë‹¤.

ë”°ë¼ì„œ ìì—°ìŠ¤ëŸ½ê²Œ í™•ì¥ì„±ì„ ê³ ë ¤í•œ ì„¤ê³„ë„ í•„ìš”í•´ì¡Œë‹¤.

### ìµœì¢… ì½”ë“œ

í•´ë‹¹ ì‘ì—…ì—ì„œ í° í‹€ì€ ë³€ê²½ë˜ì§€ ì•Šê¸°ì— ê´€ë ¨ ì €ì¥ì†Œë§Œ ê³µìœ í•˜ê³ ì í•œë‹¤. ğŸ˜‡

[google-search-console-playground](https://github.com/jgjgill/google-search-console-playground)

<br />

í¬ê²Œ ë³€ê²½ëœ ë¶€ë¶„ìœ¼ë¡œ ë‹¤ìŒ 2ê°€ì§€ì´ë‹¤.

- í”„ë¡œì íŠ¸ë³„ë¡œ ì •ë³´ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆëŠ” ìŠ¤í‚¤ë§ˆ êµ¬ì„±
- í”„ë¡œì íŠ¸ë³„ ìŠ¤ë ˆë“œë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•´ ìŠ¬ë™ ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ êµì²´ (`@slack/webhook` â†’ `@slack/web-api`)
  - `Features â†’ OAuth & Permissions` ì—ì„œ OAuth Tokens ë° Scopes êµ¬ì„±
  - ì±„ë„ì— ì•± ì¶”ê°€

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-slack-4.png"
  alt="Search Console ìŠ¬ë™ 4"
/>

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-slack-5.png"
  alt="Search Console ìŠ¬ë™ 5"
/>

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-slack-6.png"
  alt="Search Console ìŠ¬ë™ 6"
/>

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-slack-7.png"
  alt="Search Console ìŠ¬ë™ 7"
/>

<br />

ë‹¤ìŒê³¼ ê°™ì´ ìŠ¤ë ˆë“œ ë‚´ì—ì„œ ì§€í‘œë“¤ì´ êµ¬ì„±ëœë‹¤.

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-slack-8.png"
  alt="Search Console ìŠ¬ë™ 8"
/>

<br />

ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œë„ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ê´€ë ¨ ë¬¸ì„œë„ êµ¬ì„±í–ˆë‹¤.

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-result-1.png"
  alt="Search Console ê²°ê³¼ 1"
/>

<br />

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/search-console-automation/images/search-console-result-2.png"
  alt="Search Console ê²°ê³¼ 2"
/>

## ë§ˆë¬´ë¦¬

ë‹¨ìˆœí•œ ìë™í™” ì‘ì—…ì´ì—ˆì§€ë§Œ ì´ë¥¼ í†µí•´ ì„¸ ê°€ì§€ íš¨ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆë‹¤.

<br />

- ê°œë°œìì˜ ì‹œê°„ ì ˆì•½
- ë°ì´í„°ì˜ ì •í™•ì„± í–¥ìƒ
- í™•ì¥ ê°€ëŠ¥í•œ ì‹œìŠ¤í…œ êµ¬ì¶•

<br />

ì•ìœ¼ë¡œë„ ì‚¬ë‚´ì— ì¡´ì¬í•˜ëŠ” ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„±ì„ í•˜ë‚˜ì”© ì¤„ì—¬ë‚˜ê°€ë³´ì. ğŸ§
