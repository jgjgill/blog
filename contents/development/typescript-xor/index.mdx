---
title: 'TypeScript XOR íƒ€ì…ê³¼ í•¨ê»˜ ë¦¬íŒ©í„°ë§'
description: 'TypeScript XOR íƒ€ì…ì„ í™œìš©í•´ì„œ ë¦¬íŒ©í„°ë§í•œ ê³¼ì •ì„ ê³µìœ í•©ë‹ˆë‹¤.'
date: '2024-01-27'
slug: 'typescript-xor'
thumbnail: './images/typescript-xor-thumbnail.png'
thumbnail_alt: 'TypeScript XOR Thumbnail'
category: 'development'
type: 'post'
---

<Callout>
  ğŸ’¡ TypeScript XOR íƒ€ì…ì„ í™œìš©í•´ì„œ ë¦¬íŒ©í„°ë§í•œ ê³¼ì •ì„ ê³µìœ í•©ë‹ˆë‹¤. í”¼ë“œë°±ì€ ì–¸ì œë‚˜
  í™˜ì˜ì…ë‹ˆë‹¤:)
</Callout>

## íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©í•œ ë¦¬íŒ©í„°ë§

ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œ ìƒí™©ì— ì§ë©´í–ˆë‹¤.

```ts
// ì½”ë“œì˜ ì„¸ë¶€ ë‚´ìš©ë“¤ì€ ì„ì˜ë¡œ ë³€ê²½í–ˆë‹¤.

const rootMenu = [
  {
    key: 'bird',
    label: 'ìƒˆ',
    index: 123,
    subMenu: [{ label: 'ì˜¤ë¦¬', key: '/duck', path: '/duck' }],
  },
  { key: 'cat', label: 'ê³ ì–‘ì´', index: 321, path: '/cat' },
	...
]
```

ë³€ìˆ˜ëª…ì¸ `rootMenu`ë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆë“¯ì´ ë©”ë‰´ì— ëŒ€í•œ ë°ì´í„°ë¥¼ êµ¬ì„±í•œë‹¤.
ì´ ë°°ì—´ì„ ì²˜ìŒ ë´¤ì„ ë•Œ **íƒ€ì…ì˜ í•„ìš”ì„±**ì„ í¬ê²Œ ëŠê¼ˆë‹¤.

ë©”ë‰´ë¥¼ ìƒì„±í•˜ëŠ” ë¶€ë¶„ì´ê¸°ì— ê³„ì†í•´ì„œ ë°ì´í„°ê°€ ì¶”ê°€ë  ê°€ëŠ¥ì„±ì´ í¬ë‹¤.
ì´ë•Œ íƒ€ì…ì´ ì •ì˜ë˜ì–´ ìˆì§€ ì•Šë‹¤ë³´ë‹ˆ ì‹¤ìˆ˜í•  í™•ë¥ ì´ ë§¤ìš° ë†’ì•„ì§€ê²Œ ëœë‹¤.
í•´ë‹¹ ë°°ì—´ì— ë°ì´í„°ë¥¼ ì¶”ê°€í•  ë•Œë§ˆë‹¤ ì˜¤íƒ€ë‚˜ ì˜ëª»ëœ ë°ì´í„° êµ¬ì¡°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

**ë¦¬íŒ©í„°ë§ì˜ í•„ìš”ì„±**ì´ ìƒê²¼ë‹¤.
ì½”ë“œë¥¼ ê³ ì³ ë‚˜ê°€ë³´ì.

## ë¬¸ì œ ì •ì˜

ìš°ì„  `rootMenu`ì—ì„œ ì‚¬ìš©ë˜ê³  ìˆëŠ” íƒ€ì…ë“¤ì„ ì •ì˜í•´ë³´ì.

ê³µí†µì ìœ¼ë¡œëŠ” `key`, `label`, `index`ì´ ì‚¬ìš©ë˜ê³  ìˆë‹¤.
ì°¨ì´ê°€ ë°œìƒí•˜ëŠ” ë¶€ë¶„ì€ `path`ì™€ `subMenu`ì´ë‹¤.

ìš”êµ¬ ì‚¬í•­ì— ë”°ë¼ íƒ€ì…ì„ ì •ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```ts
// ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” íƒ€ì…
type RootMenuBase = { key: string; label: string; index: number }

// path íƒ€ì…
type RootMenuPath = { path: string }

// subMenu íƒ€ì…
type RootMenuSubMenu = { subMenu: SubMenu[] }
type SubMenu = { label: string; key: string; path: string }
```

ì´ë¥¼ ì–´ë–»ê²Œ ì ì ˆí•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê¹Œ?

### ì˜µì…”ë„ í”„ë¡œí¼í‹°

ìš°ì„  í•˜ë‚˜ì”© ì ‘ê·¼í•˜ì.

ì²˜ìŒì— ë– ì˜¤ë¥¸ ë°©ì‹ì€ **ì˜µì…”ë„ í”„ë¡œí¼í‹°**ì˜€ë‹¤.

```ts
// ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” íƒ€ì…
type RootMenuBase = { key: string; label: string; icon: JSX.Element }

// subMenu íƒ€ì…
type SubMenu = { label: string; key: string; path: string }

type RootMenu = RootMenuBase & {
  path?: string
  subMenu?: SubMenu[]
}
```

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/typescript-xor/images/optional-property-result.png"
  alt="ì˜µì…”ë„ í”„ë¡œí¼í‹° ê²°ê³¼"
/>

ì¼ë‹¨ ì—ëŸ¬ê°€ ëœ¨ì§€ ì•ŠëŠ”ë‹¤.
ì¼ì°¨ì ì¸ ëª©í‘œëŠ” ë‹¬ì„±í–ˆë‹¤.

í•˜ì§€ë§Œ ì‚¬ìš©í•˜ëŠ” ì…ì¥ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ `path`ì™€ `subMenu`ë¥¼ ê°™ì´ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/typescript-xor/images/type-not-result.png"
  alt="íƒ€ì…ì´ ì œëŒ€ë¡œ ì¶”ë¡ ë˜ì§€ ì•ŠëŠ” ê²°ê³¼"
/>

ë‹¤ë¥¸ ë°©ì•ˆì„ ë– ì˜¬ë ¤ë³´ì.

## ìœ ë‹ˆì˜¨ íƒ€ì…

ê·¸ ë‹¤ìŒìœ¼ë¡œ ë– ì˜¤ë¥¸ ê²ƒì€ **ìœ ë‹ˆì˜¨ íƒ€ì…**ì´ë‹¤.

ìœ ë‹ˆì˜¨ íƒ€ì…ì€ ë‘ ê°œ ì´ìƒì˜ ë‹¤ë¥¸ íƒ€ì…ìœ¼ë¡œ êµ¬ì„±ëœ íƒ€ì…ìœ¼ë¡œ, ì´ëŸ¬í•œ íƒ€ì… ì¤‘ **í•˜ë‚˜ê°€ ë  ìˆ˜ ìˆëŠ” ê°’ì„ ë‚˜íƒ€ë‚´ê³ ì í•  ë•Œ** ì‚¬ìš©í•œë‹¤.

í˜„ì¬ ë¬¸ì œê°€ ë˜ëŠ” ë¶€ë¶„ì€ `subMenu`ì™€ `path` ì˜ì—­ì´ë‹¤.
ì—¬ê¸°ì„œ **ì´ ë‘ ê°’ ì¤‘ì— í•˜ë‚˜ë§Œ ë°›ê³  ì‹¶ì–´ì„œ ë°œìƒí•œ ë¬¸ì œ**ì´ë‹¤.

<br />

ìœ ë‹ˆì˜¨ íƒ€ì…ìœ¼ë¡œ êµ¬ì„±í•´ë³´ì.

```ts
// ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” íƒ€ì…
type RootMenuBase = { key: string; label: string; index: number }

// path íƒ€ì…
type RootMenuPath = { path: string }

// subMenu íƒ€ì…
type RootMenuSubMenu = { subMenu: SubMenu[] }
type SubMenu = { label: string; key: string; path: string }

// ìœ ë‹ˆì–¸ íƒ€ì… í™œìš©
type RootMenu = RootMenuBase & (RootMenuPath | RootMenuSubMenu)
```

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/typescript-xor/images/type-not-result.png"
  alt="íƒ€ì…ì´ ì œëŒ€ë¡œ ì¶”ë¡ ë˜ì§€ ì•ŠëŠ” ê²°ê³¼"
/>

í•˜ì§€ë§Œ ê²°ê³¼ëŠ” ì´ì „ê³¼ ë˜‘ê°™ì´ ì›í•˜ëŠ” ëŒ€ë¡œ ë‚˜ì˜¤ì§€ ì•ŠëŠ”ë‹¤.

ì™œ ê·¸ëŸ´ê¹Œ?

### ìœ ë‹ˆì–¸ íƒ€ì…ìœ¼ë¡œ ì‘ì—…í•˜ê¸°

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ìœ ë‹ˆì–¸ì˜ ëª¨ë“  ë©¤ë²„ì— ëŒ€í•´ ìœ íš¨í•œ ê²½ìš°ì—ë§Œ ì—°ì‚°ì„ í—ˆìš©í•œë‹¤ê³  í•œë‹¤.
ê·¸ë˜ì„œ ë‹¤ìŒê³¼ ê°™ì´ `number | string`ì´ ìˆëŠ” ê²½ìš° ë¬¸ìì—´ì—ì„œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/typescript-xor/images/union-type-error-example.png"
  alt="ìœ ë‹ˆì–¸ íƒ€ì… ì—ëŸ¬ ì˜ˆì œ"
/>

ë”°ë¼ì„œ í˜„ì¬ ìƒí™©ì—ì„œë„ `subMenu`ì™€ `path`ê°€ ëª¨ë‘ ê³ ë ¤ëœ ê²ƒì´ë‹¤.

ì´ëŸ¬í•œ ê²½ìš° ì¼ë°˜ì ìœ¼ë¡œ [Narrowing](https://www.typescriptlang.org/docs/handbook/2/narrowing.html#assertion-functions)ì„ í™œìš©í•˜ì—¬ íƒ€ì…ì„ ì¢í˜€ ë‚˜ê°„ë‹¤.
í•˜ì§€ë§Œ ìš°ë¦¬ì˜ ë¬¸ì œëŠ” **ë°°ì—´ê³¼ ê°ì²´ì—ì„œ ë°œìƒ**í•´ì„œ ë§ˆë•…íˆ ì ìš©í•  ìˆ˜ ì—†ë‹¤.

<br />

ê·¸ë ‡ë‹¤ë©´ í˜„ì¬ ìƒí™©ì„ ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆì„ê¹Œ?

ì–´ë–»ê²Œ í˜„ì¬ ë¬¸ì œë¥¼ ê²€ìƒ‰í•´ì„œ ì‹¤ë§ˆë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆì„ê¹Œ?

## ë¬¸ì œë¥¼ ë‹¨ìˆœí™”ì‹œí‚¤ê¸°

ë‹¤ì‹œ ë¬¸ì œ ìƒí™©ì„ ê³°ê³°ì´ ìƒê°í•´ë³´ì.
í‚¤ì›Œë“œë¥¼ ë„ì¶œí•˜ê¸° ìœ„í•´ ë¬¸ì œ ìƒí™©ì—ì„œ ë¶ˆí•„ìš”í•œ ë¶€ë¶„ë“¤ì„ ì œê±°í•´ì„œ ë‹¨ìˆœí™”ì‹œí‚¤ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.

`key`, `label`, `index`ì„ ì—†ì• ì.
ê·¸ë¦¬ê³  `subMenu`, `path`ë„ ì–´ë µê²Œ ì ‘ê·¼í•˜ì§€ ë§ê³  `a`ì™€ `b`ë¡œ ëŒ€ì…í•˜ì.

ë¬¸ì œê°€ ë˜ëŠ” ìƒí™©ì— ì§‘ì¤‘í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‹¨ìˆœí™”ì‹œí‚¬ ìˆ˜ ìˆë‹¤.

```ts
type A = { a: string }
type B = { b: string }

type ê²°ê³¼_íƒ€ì… = ???

const result: ê²°ê³¼_íƒ€ì… = {
  // A í˜¹ì€ B ë‘˜ ì¤‘ì— í•˜ë‚˜ë§Œ ë‚˜ì™€ì•¼ í•œë‹¤.
  // Aê°€ ë‚˜ì˜¤ë©´ Bê°€ ë‚˜ì˜¤ë©´ ì•ˆëœë‹¤.
  // Bê°€ ë‚˜ì˜¤ë©´ Aê°€ ë‚˜ì˜¤ë©´ ì•ˆëœë‹¤.
}
```

ì´ë ‡ê²Œ ë¬¸ì œê°€ ë‹¨ìˆœí•´ì§€ë‹ˆ ê²€ìƒ‰ì„ í•´ì•¼í•  í‚¤ì›Œë“œì™€ ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ ì í–ˆëŠ”ì§€ ëª…í™•í•´ì§„ë‹¤.

ìš°ë¦¬ê°€ í•˜ê³ ì í•˜ëŠ” ê²ƒì€ **ë‘ ê°œì¤‘ì— í•˜ë‚˜ë§Œ ë°›ëŠ” ê²½ìš°,ì¦‰ `XOR`ì¸ ê²½ìš°**ì˜€ë‹¤.

í•´ë‹¹ í‚¤ì›Œë“œë¡œ ë‹¤ì‹œ ë¬¸ì œë¥¼ ì ‘ê·¼í•˜ì.

## XOR íƒ€ì… ë§Œë“¤ê¸°

`XOR`íƒ€ì…ì„ ë§Œë“¤ì–´ë³´ì.

```ts
type A = { a: string; b?: never }
type B = { b: string; a?: never }
type ê²°ê³¼_íƒ€ì… = A | B

const result: ê²°ê³¼_íƒ€ì… = { a: 'a', b: 'b' } // ì—ëŸ¬ ë°œìƒ
```

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/typescript-xor/images/xor-a-b-example.png"
  alt="XOR a, b ì˜ˆì œ"
/>

ì œëŒ€ë¡œ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.

### ì¶”ìƒí™”ì‹œí‚¤ê¸°

ì¡°ê¸ˆ ë” ë‚˜ì•„ê°€ì„œ ì¶”ìƒí™”ë¥¼ ì‹œì¼œë³´ì.

```ts
type Without<T, U> = { [P in Exclude<keyof T, keyof U>]?: never }
type XOR<T, U> = (Without<T> & U) | (Without<U> & T)

type A = { a: string }
type B = { b: string }
type ê²°ê³¼_íƒ€ì… = XOR<A, B>

const result: ê²°ê³¼_íƒ€ì… = { a: 'a', b: 'b' } // ì—ëŸ¬ ë°œìƒ
```

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/typescript-xor/images/xor-without-example.png"
  alt="XOR Without ì˜ˆì œ"
/>

## ë¬¸ì œ í•´ê²°í•˜ê¸°

ì´ë¥¼ ì ìš©í•˜ì—¬ ë‹¤ì‹œ ë¬¸ì œë¥¼ í•´ê²°í•˜ì.

```ts
type Without<T> = { [P in keyof T]?: undefined }
type XOR<T, U> = (Without<T> & U) | (Without<U> & T)

// ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” íƒ€ì…
type RootMenuBase = { key: string; label: string; index: number }

// path íƒ€ì…
type RootMenuPath = { path: string }

// subMenu íƒ€ì…
type RootMenuSubMenu = { subMenu: SubMenu[] }
type SubMenu = { label: string; key: string; path: string }

// XOR íƒ€ì… í™œìš©
type RootMenu = (RootMenuBase & XOR<RootMenuPath, RootMenuSubMenu>)[]

const rootMenu: RootMenu = [
  {
    key: 'bird',
    label: 'ìƒˆ',
    index: 123,
    subMenu: [{ label: 'ì˜¤ë¦¬', key: '/duck', path: '/duck' }],
  },
  { key: 'cat', label: 'ê³ ì–‘ì´', index: 321, path: '/cat' },
]
```

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/typescript-xor/images/xor-result.gif"
  alt="XOR ê²°ê³¼"
/>

ì—ëŸ¬ë„ ì œëŒ€ë¡œ ì²´í¬í•œë‹¤..! ğŸ˜†

## ì°¸ê³  ë¬¸ì„œ

- [Union Types](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#union-types)
- [Why does A | B allow a combination of both, and how can I prevent it?](https://stackoverflow.com/questions/46370222/why-does-a-b-allow-a-combination-of-both-and-how-can-i-prevent-it)
