---
title: 'fetchì— ëŒ€í•´ ì•Œì•„ë³´ê¸°'
description: 'fetchì™€ ê´€ë ¨ëœ ê°œë…ë“¤ì„ ì´í•´í•©ë‹ˆë‹¤.'
date: '2023-11-05'
slug: 'learn-about-fetch'
thumbnail: './images/learn-about-fetch-thumbnail.png'
thumbnail_alt: 'learn-about-fetch-thumbnail'
category: 'development'
---

# fetch

<Callout>ğŸ’¡ fetchì™€ ê´€ë ¨ëœ ê°œë…ë“¤ì„ ì´í•´í•©ë‹ˆë‹¤. í”¼ë“œë°±ì€ ì–¸ì œë‚˜ í™˜ì˜ì…ë‹ˆë‹¤:)</Callout>

## ë“¤ì–´ê°€ê¸°

NextJSë¥¼ í•™ìŠµí•˜ëŠ” ê³¼ì •ì—ì„œ ë°ì´í„° íŒ¨ì¹­ê³¼ ê´€ë ¨í•˜ì—¬ fetch í•¨ìˆ˜ë¥¼ ì ‘í•˜ê²Œ ëœë‹¤.
ê·¸ëŸ¬ë©´ì„œ ê´€ë ¨ëœ ë‚´ìš©ê³¼ ì½”ë“œë¥¼ ë§ì´ í•™ìŠµí•˜ê³  ìˆë‹¤.

ì´ ê³¼ì •ì—ì„œ ì´ì „ì—ëŠ” `Axios`ì™€ ê°™ì€ ë¹„ë™ê¸° í†µì‹  ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§ì´ ì“°ë‹¤ ë³´ë‹ˆ fetch í•¨ìˆ˜ë¥¼ ì“°ëŠ”ê²Œ ìµìˆ™ì§€ ì•Šì•˜ë‹¤.
ì´ë¥¼ í†µí•´ ë‚˜ ìŠ¤ìŠ¤ë¡œê°€ fetch í•¨ìˆ˜ì— ëŒ€í•´ ê¹Šê²Œ í•™ìŠµí•˜ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒì„ ëŠë‚„ ìˆ˜ ìˆì—ˆë‹¤.

ê·¸ë¦¬ê³  fetchì— ëŒ€í•´ ê³°ê³°ì´ ê³ ë¯¼í•˜ë©´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì§€ì‹ì˜ ëª¨í˜¸í•¨ì´ ìˆë‹¤ëŠ” ê²ƒì„ ë°œê²¬í–ˆë‹¤.

- NextJSì—ì„œëŠ” ì™œ fetchë¥¼ ì‚¬ìš©í• ê¹Œ?
- fetchì™€ XMLHttpRequestì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¼ê¹Œ?
- fetchëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?

ì´ì— ì´ë²ˆ ê¸€ì—ì„œëŠ” fetchë¥¼ ì¤‘ì ì ìœ¼ë¡œ ë‹¤ë£¨ë©´ì„œ ë¹„ë™ê¸° ë°ì´í„° í†µì‹ ì— ëŒ€í•´ ì•Œì•„ë³´ê³ ì í•œë‹¤.

## AJAXë€?

> AJAX is a mnemonic for â€œAsynchronous JavaScript and XMLâ€, although, strictly speaking, developers didnâ€™t need to use asynchronous methods, JavaScript, or XML.
> We now use the generic â€œAjaxâ€ term for any client-side process that fetches data from a server and updates the DOM without requiring a full-page refresh.

AJAX(AsynchronousÂ JavaScriptÂ AndÂ XML)ëŠ” ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ì „ì²´ í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì¹˜ì§€ ì•Šê³ ë„ DOMì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ ì¸¡ ê³¼ì •ì„ ì˜ë¯¸í•œë‹¤.

AJAXë¼ëŠ” ì´ë¦„ì—ëŠ” `JavaScript`ì™€ `XML`ë§Œ í¬í•¨ë˜ì–´ ìˆì§€ë§Œ ì•ì„œ ì„¤ëª…í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ë©´ ì¼ë°˜ì ìœ¼ë¡œ AJAXì— í¬í•¨ëœë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤.

### XMLHttpRequest

XMLHttpRequest(XHR)ì€ **AJAX ìš”ì²­ì„ ìƒì„±í•˜ëŠ” JavaScript API**ì´ë‹¤.
XHRì˜ ë©”ì„œë“œë¥¼ í™œìš©í•˜ë©´ì„œ ë¸Œë¼ìš°ì €ì™€ ì„œë²„ì˜ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ì „ì†¡í•  ìˆ˜ ìˆë‹¤.

XHRì€ ë¸Œë¼ìš°ì €ì—ì„œ ì œê³µí•˜ëŠ” Web APIì´ê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œë§Œ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•œë‹¤. (node í™˜ê²½ì—ì„œëŠ” ì œê³µx)

<br />

ì—¬ê¸°ì„œ `Axios`ëŠ” XHRì„ í™œìš©í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.

ê·¸ë ‡ë‹¤ë©´ `Axios`ë¥¼ í™œìš©í•˜ì§€ ì•ŠëŠ” XHRë¥¼ í†µí•œ ë°ì´í„° í†µì‹ ì€ ì–´ë–»ê²Œ ì´ë£¨ì–´ì§ˆê¹Œ?

[JSONPlaceholder](https://jsonplaceholder.typicode.com/) APIë¥¼ í™œìš©í•´ ê´€ë ¨ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì.

```js
const xhr = new XMLHttpRequest()

function reqListener() {
  const data = JSON.parse(xhr.responseText)
  console.log(data)
}

function reqError(err) {
  console.log('Fetch Error: ', err)
}

xhr.onload = reqListener
xhr.onerror = reqError
xhr.open('GET', 'https://jsonplaceholder.typicode.com/users')
xhr.send()
```

ê°„ë‹¨í•˜ê²Œ APIë¥¼ í˜¸ì¶œí•´ì„œ ë°ì´í„°ë¥¼ ë°›ëŠ” ë¡œì§ì´ë‹¤.

ì½”ë“œë¥¼ ë³´ë©´ ìš°ì„  `XMLHttpRequest` ìƒì„±ì í•¨ìˆ˜ë¥¼ í†µí•´ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
ê´€ë ¨ ë©”ì„œë“œì—ì„œëŠ” ì„±ê³µ ë° ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ì§„í–‰í•˜ê³  HTTP ë©”ì„œë“œì™€ ìš”ì²­ URLì„ ì •ì˜í•´ í˜¸ì¶œ ê³¼ì •ì„ ì„¤ì •í•œë‹¤.

ê°„ë‹¨í•œ íë¦„ì€ ì´í•´í•  ìˆ˜ ìˆê² ì§€ë§Œ, í‰ì†Œ ìš°ë¦¬ê°€ ì¨ì™”ë˜ ë‹¨ìˆœí•˜ê³  ê¹”ë”í•œ í˜•íƒœë¡œ ëŠê»´ì§€ì§€ëŠ” ì•ŠëŠ”ë‹¤.

### fetchì˜ ë“±ì¥

fetchëŠ” APIë¥¼ ë” ë‹¨ìˆœí•˜ê³  ê¹”ë”í•œ API í˜•íƒœë¥¼ ì§€ì›í•œë‹¤.

ì½œë°± ê¸°ë°˜ì¸ XHRê³¼ ë‹¬ë¦¬ fetchëŠ” `promise` ê¸°ë°˜ì´ë‹¤.

ë‹¤ìŒê³¼ ê°™ì´ `promise` ë°©ì‹ì„ í†µí•´ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```js
fetch('https://jsonplaceholder.typicode.com/users')
  .then((response) => {
    if (!response.ok) {
      throw new Error('Failed to fetch data')
    }

    return response.json()
  })
  .then((data) => console.log(data))
```

ê·¸ë¦¬ê³  fetchëŠ” `Request`,`Response`, `Header`ì— ëŒ€í•œ ë‹¤ì–‘í•œ ì†ì„±ì„ ì œê³µí•˜ëŠ” êµ¬ì„± ê°€ëŠ¥í•œ ê°ì²´ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

**Request**

```js
const request = new Request('https://jsonplaceholder.typicode.com/users')

console.log(request.url) // https://jsonplaceholder.typicode.com/users
console.log(request.method) // GET (HTTP method)
console.log(request.credentials) // same-origin
```

**Response**

```js
const res = await fetch(request)

console.log(res.ok) // true (boolean)
console.log(res.status) // 200  (HTTP status)
console.log(res.url) // https://jsonplaceholder.typicode.com/users

const json = await res.json() // ë³¸ë¬¸ì„ JSONìœ¼ë¡œ êµ¬ë¬¸ ë¶„ì„
const text = await res.text() // ë³¸ë¬¸ì„ í…ìŠ¤íŠ¸ë¡œ êµ¬ë¬¸ ë¶„ì„
const formData = await res.formData() // ë³¸ë¬¸ì˜ í¼ë°ì´í„° í‘œí˜„
```

**Header**

```js
const headers = new Headers()
headers.append('Content-Type', 'text/xml')

const request = new Request('https://jsonplaceholder.typicode.com/users', { headers })

const res = await fetch(request)
console.log(res.headers.get('Content-Type')) // application/json; charset=UTF-8
```

(JSONPlaceholderì—ì„œëŠ” í—¤ë”ì˜ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•œ ê²ƒ ê°™ìœ¼ë‹ˆ ì¶œë ¥ë§Œ í™•ì¸í•˜ì!)

<br />

ì´ì™¸ì—ë„ `Stream`, CORSë‚˜ Credentialì™€ ê´€ë ¨ëœ ì •ì±… ì œì–´ ë“±ì˜ ì°¨ì´ê°€ ìˆì§€ë§Œ ì´ë²ˆ ê¸€ì—ì„œëŠ” ìì„¸íˆ ë‹¤ë£¨ì§€ ì•Šê³  ìš”ì•½ë§Œ í•˜ê³ ì í•œë‹¤.

- fetch() ìš”ì²­ì˜ ì‘ë‹µì€ Stream ê°ì²´ì´ë‹¤. ì¦‰ json() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ìŠ¤íŠ¸ë¦¼ ì½ê¸°ê°€ ë¹„ë™ê¸°ì‹ìœ¼ë¡œ ë°œìƒí•˜ë¯€ë¡œ í”„ë¡œë¯¸ìŠ¤ê°€ ë°˜í™˜ëœë‹¤.
- fetchëŠ” CORS ë° ê¸°íƒ€ í™•ì¥ ê¸°ëŠ¥ê³¼ ê°™ì€ ê³ ê¸‰ HTTP ê°œë…ì„ HTTPì— í†µí•©í•œë‹¤.
- fechëŠ” ì„œë¹„ìŠ¤ ì›Œì»¤ì—ì„œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë” ë‚˜ì€ ëŒ€ì•ˆì„ ì œê³µí•œë‹¤.

<br />

ì´ë²ˆ ê¸€ì—ì„œëŠ” ìºì‹±ì— ëŒ€í•´ ìì„¸íˆ ì‚´í´ë³´ê³ ì í•œë‹¤.

## HTTP Cache ì‚´í´ë³´ê¸°

XHRê³¼ fetchì˜ ì£¼ìš” ì°¨ì´ì ìœ¼ë¡œ **ìºì‹± ì œì–´**ë¥¼ ë“¤ ìˆ˜ ìˆë‹¤.
XHRê³¼ ë‹¬ë¦¬ fetchì—ì„œëŠ” ì‰½ê²Œ HTTP ìºì‹œë¥¼ ë‹¤ë£° ìˆ˜ ìˆë‹¤.

ì´ì™€ ê´€ë ¨í•´ì„œ NextJSì—ì„œë„ [ë°ì´í„° íŒ¨ì¹­(Caching Data)](https://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating#caching-data) ë¶€ë¶„ì—ì„œ ì¤‘ìš”í•˜ê²Œ ë‹¤ë£¨ì–´ì§„ë‹¤.

```js
fetch('https://...', { cache: 'force-cache' })
```

ìºì‹œ ì†ì„±ì—ëŠ” ë‹¤ìŒ ê°’ë“¤ì´ ì¡´ì¬í•œë‹¤.

**default**

- ë¸Œë¼ìš°ì €ëŠ” HTTP ìºì‹œì—ì„œ ì¼ì¹˜í•˜ëŠ” ìš”ì²­ì„ ì°¾ìŒ
  - ì¼ì¹˜í•˜ëŠ” í•­ëª©ì´ ìˆê³  ìƒˆ í•­ëª©(fresh)ì´ë©´, ìºì‹œì—ì„œ ë°˜í™˜
  - ì¼ì¹˜í•˜ëŠ” í•­ëª©ì´ ìˆì§€ë§Œ ì˜¤ë˜ëœ í•­ëª©(stale)ì´ë©´, ì›ê²© ì„œë²„ì— ì¡°ê±´ë¶€ ìš”ì²­ -> ë¦¬ì†ŒìŠ¤ ë³€ê²½ ì—¬ë¶€ì— ë”°ë¼ ìºì‹œì—ì„œ ë°˜í™˜ or ìºì‹œ ì—…ë°ì´íŠ¸
  - ì¼ì¹˜í•˜ëŠ” í•­ëª© ì—†ìœ¼ë©´ ì •ìƒ ìš”ì²­, ìºì‹œ ì—…ë°ì´íŠ¸

<br />

**no-store**

- ìºì‹œ í™•ì¸ X, ìºì‹œ ì—…ë°ì´íŠ¸ X

<br />

**reload**

- ìºì‹œ í™•ì¸ X, ìºì‹œ ì—…ë°ì´íŠ¸

<br />

**no-cache**

- ë¸Œë¼ìš°ì €ëŠ” HTTP ìºì‹œì—ì„œ ì¼ì¹˜í•˜ëŠ” ìš”ì²­ì„ ì°¾ìŒ
  - fresh stale ì—¬ë¶€ ì‹ ê²½ X, ì›ê²© ì„œë²„ì— ì¡°ê±´ë¶€ ìš”ì³¥ -> ë¦¬ì†ŒìŠ¤ ë³€ê²½ ì—¬ë¶€ì— ë”°ë¼ ìºì‹œì—ì„œ ë°˜í™˜ or ìºì‹œ ì—…ë°ì´íŠ¸
  - ì¼ì¹˜í•˜ëŠ” í•­ëª© ì—†ìœ¼ë©´ ì •ìƒ ìš”ì²­, ìºì‹œ ì—…ë°ì´íŠ¸

<br />

**force-cache**

- ë¼ìš°ì €ëŠ” HTTP ìºì‹œì—ì„œ ì¼ì¹˜í•˜ëŠ” ìš”ì²­ì„ ì°¾ìŒ
  - fresh stale ì—¬ë¶€ ì‹ ê²½ X, ìºì‹œì—ì„œ ë°˜í™˜
  - ì¼ì¹˜í•˜ëŠ” í•­ëª© ì—†ìœ¼ë©´ ì •ìƒ ìš”ì²­, ìºì‹œ ì—…ë°ì´íŠ¸

<br />

**only-if-cached**

- ë¸Œë¼ìš°ì €ëŠ” HTTP ìºì‹œì—ì„œ ì¼ì¹˜í•˜ëŠ” ìš”ì²­ì„ ì°¾ìŒ
  - fresh stale ì—¬ë¶€ ì‹ ê²½ X, ìºì‹œì—ì„œ ë°˜í™˜
  - ì¼ì¹˜í•˜ëŠ” í•­ëª©ì´ ì—†ìœ¼ë©´, ë¸Œë¼ìš°ì €ëŠ” 504 Gateway timeout ìƒíƒœë¡œ ì‘ë‹µ

<br />

ìì„¸í•œ ë‚´ìš©ì€ [Request: cache property](https://developer.mozilla.org/ko/docs/Web/API/Request/cache) ë¬¸ì„œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

## ë§ˆë¬´ë¦¬

fetchì— ëŒ€í•´ í•™ìŠµí•˜ë©´ì„œ ìƒê°ë³´ë‹¤ ë§ì€ ê¸°ëŠ¥ì„ í¸ë¦¬í•˜ê²Œ ì œê³µí•œë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆê³  ì›¹ í‘œì¤€ APIì— ëŒ€í•´ì„œë„ ì¢€ ë” ê¹Šê²Œ íŒŒê³  ë“œëŠ” ì‹œê°„ì´ ë˜ì—ˆë˜ ê²ƒ ê°™ë‹¤.

NextJSë¥¼ í•™ìŠµí•˜ë©´ì„œ ì—­ì‹œ ê¸°ë³¸ì„ ë‹¨ë‹¨íˆ ë‹¤ì§€ëŠ”ê²Œ ì¤‘ìš”í•˜ë‹¤ëŠ” ìƒê°ì„ ë‹¤ì‹œê¸ˆ í•˜ê²Œ ëœë‹¤.

## ì°¸ê³  ë¬¸ì„œ

- [XMLHttpRequest](https://medium.com/%EA%B0%9C%EB%B0%9C%EC%9E%90%EC%9D%98%ED%92%88%EA%B2%A9/xmlhttprequest-86aa7f2207b4)
- [fetch() global function](https://developer.mozilla.org/en-US/docs/Web/API/fetch)
- [Using the Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch)
- [fetch() ì†Œê°œ](https://web.dev/articles/introduction-to-fetch?hl=ko)
- [Ajax Battle: XMLHttpRequest Vs The Fetch API](https://blog.openreplay.com/ajax-battle-xmlhttprequest-vs-fetch/)
- [Request: cache property](https://developer.mozilla.org/en-US/docs/Web/API/Request/cache)
