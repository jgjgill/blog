---
title: 'Gatsby - ì¹´í…Œê³ ë¦¬ êµ¬í˜„í•˜ê¸°'
description: 'Gatsbyì—ì„œ ì¹´í…Œê³ ë¦¬ ê¸°ëŠ¥ì„ êµ¬í˜„í•œ ê³¼ì •ì„ ì •ë¦¬í•©ë‹ˆë‹¤.'
date: '2023-03-28'
slug: 'adding-category-to-gatsby'
thumbnail: './images/gatsby-thumbnail.png'
thumbnail_alt: 'gatsby-thumbnail'
category: 'development'
---

# Gatsby Blog ì œì‘ê¸°

<Callout>
  ğŸ’¡ Gatsbyì—ì„œ ì¹´í…Œê³ ë¦¬ ê¸°ëŠ¥ êµ¬í˜„ê³¼ ë¦¬íŒ©í† ë§ ê³¼ì •ì„ ë‚¨ê¸°ê³ ì í•©ë‹ˆë‹¤. í”¼ë“œë°±ì€ ì–¸ì œë‚˜
  í™˜ì˜ì…ë‹ˆë‹¤:)
</Callout>

<br />

## ì¹´í…Œê³ ë¦¬ êµ¬í˜„í•˜ê¸°

Gatsbyì—ì„œ ì¹´í…Œê³ ë¦¬ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ì—¬ëŸ¬ ê°œ ì¡´ì¬í•  ê²ƒì…ë‹ˆë‹¤.
ê·¸ì¤‘ì—ì„œ ì €ëŠ” Gatsby í™ˆí˜ì´ì§€ì—ì„œ ì œì•ˆí•˜ëŠ” [Creating Tags Pages for Blog Posts](https://www.gatsbyjs.com/docs/adding-tags-and-categories-to-blog-posts/) ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
í•´ë‹¹ ê¸€ì—ì„œëŠ” íƒœê·¸ë¥¼ ì˜ˆì‹œë¡œ ì§„í–‰ë˜ì§€ë§Œ ì¹´í…Œê³ ë¦¬ì—ì„œë„ ì ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.ğŸ˜„

### Frontmatterì— category ì¶”ê°€í•˜ê¸°

categoryì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹í•˜ëŠ” ì»¨í…ì¸  (mdx, md, ...) íŒŒì¼ì—ì„œ `frontmatter` ì˜ì—­ì— ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.

```markdown
---
title: 'Gatsby - ì¹´í…Œê³ ë¦¬ êµ¬í˜„í•˜ê¸°'
category: 'development'
---
```

ê·¸ëŸ¬ë©´ Graphqlì—ì„œ categoryì— ëŒ€í•œ ë°ì´í„°ê°€ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/adding-category-to-gatsby/images/graphql-mdx-category.png"
  alt="graphql-mdx-category"
/>

íŠ¹ì • mdx íŒŒì¼ë¿ë§Œ ì•„ë‹ˆë¼ ì „ì²´ mdx íŒŒì¼ì—ì„œë„ í•´ë‹¹í•˜ëŠ” ì¹´í…Œê³ ë¦¬ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/adding-category-to-gatsby/images/graphql-allmdx-category.png"
  alt="graphql-allmdx-category"
/>

### ì¹´í…Œê³ ë¦¬ í˜ì´ì§€ Template ë§Œë“¤ê¸°

ë§Œë“¤ì–´ì§„ category ë°ì´í„°ë¥¼ ë°›ì„ Template íŒŒì¼ì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒ ë‹¨ê³„ì˜ `gatsby-node.js`ì˜ `createPages`ì—ì„œ ì‚¬ìš©ë  ê²ƒì…ë‹ˆë‹¤.
`src/templates/CategoryTemplate.tsx` ê²½ë¡œì— íŒŒì¼ì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. ë‹¤ë¥¸ í˜ì´ì§€ë“¤ì„ ë§Œë“¤ì—ˆë˜ ê²ƒì²˜ëŸ¼ ì½”ë“œë¥¼ êµ¬ì„±í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.

ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ Templateì€ `/category/{category-name}`ì™€ ê°™ì€ ê²½ë¡œë¡œ í™œìš©ë  ê²ƒì…ë‹ˆë‹¤.

```js
import App from 'App'
import { Author, PostList, Seo } from 'components'
import Flex from 'components/@shared/Flex'
import Category from 'components/Category'
import Layout from 'components/Layout'
import Post from 'components/Post'
import { graphql, HeadFC, PageProps } from 'gatsby'
import useIntersectionObserver from 'hooks/useIntersectionObserver'
import React from 'react'
import { Content } from 'types/content'

interface Props {
  allMdx: {
    nodes: Content[]
  }
  category: {
    totalCount: number
    group: {
      totalCount: number
      fieldValue: string
    }[]
  }
}

const CategoryTemplate = ({
  data,
  pageContext,
}: PageProps<Props, { category: string }>) => {
  const { ref, page } = useIntersectionObserver(data.allMdx.nodes.length)

  return (
    <App>
      <Layout>
        <Flex flexDirection="column" gap={20}>
          <Author />
          <Category selectedCategory={pageContext.category} />

          <PostList
            render={data.allMdx.nodes.slice(0, page).map((node) => (
              <Post key={node.id} node={node} />
            ))}
          />
          <div ref={ref} />
        </Flex>
      </Layout>
    </App>
  )
}

export default CategoryTemplate

export const Head: HeadFC = () => <Seo />

export const query = graphql`
  query ($category: String) {
    site {
      siteMetadata {
        title
      }
    }
    allMdx(
      sort: { frontmatter: { date: DESC } }
      filter: { frontmatter: { category: { in: [$category] } } }
    ) {
      nodes {
        frontmatter {
          date(formatString: "MMMM DD, YYYY")
          title
          slug
          category
        }
        id
        excerpt
      }
    }
  }
`
```

### í…œí”Œë¦¿ í˜ì´ì§€ë¥¼ ë Œë”ë§í•˜ê¸° ìœ„í•´ gatsby-node.js ìˆ˜ì •í•˜ê¸°

Templateì— í•´ë‹¹í•˜ëŠ” í˜ì´ì§€ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ `gatsby-node.js`ì—ì„œ `createPages` ì‘ì—…ì´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.

ì „ì²´ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```js
const path = require('path')

exports.createPages = async ({ actions, graphql, reporter }) => {
  const { createPage } = actions
  const categoryTemplate = path.resolve('src/templates/CategoryTemplate.tsx')
  const result = await graphql(`
    {
      allMdx {
        group(field: { frontmatter: { category: SELECT } }) {
          fieldValue
        }
      }
    }
  `)

  if (result.errors) {
    reporter.panicOnBuild(`Error while running GraphQL query.`)
    return
  }

  const categories = result.data.allMdx.group

  categories.forEach((category) => {
    createPage({
      path: `/category/${category.fieldValue}`,
      component: categoryTemplate,
      context: {
        category: category.fieldValue,
      },
    })
  })
}
```

ì•ì„œ ë§Œë“¤ì—ˆë˜ Template íŒŒì¼ì„ `categoryTemplate`ë³€ìˆ˜ë¡œ ë°›ìŠµë‹ˆë‹¤.

`result` ì—ì„œëŠ” categoryì— ëŒ€í•œ ê°’ë“¤ì„ ë°›ìŠµë‹ˆë‹¤.

```js
const { createPage } = actions
const categoryTemplate = path.resolve('src/templates/CategoryTemplate.tsx')
const result = await graphql(`
  {
    allMdx {
      group(field: { frontmatter: { category: SELECT } }) {
        fieldValue
      }
    }
  }
`)
```

ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ category ë°ì´í„°ëŠ” ë°˜ë³µë¬¸ê³¼ `createPage`ë¥¼ í†µí•´ í˜ì´ì§€ë¥¼ ìƒì„±í•˜ê²Œ ë©ë‹ˆë‹¤.

`context` ì—ì„œ ì‚¬ìš©ë˜ëŠ” ê°’ì€ `CategoryPage` queryì—ì„œ ì§€ì •ëœ category ê²Œì‹œë¬¼ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

```js
const categories = result.data.allMdx.group

categories.forEach((category) => {
  createPage({
    path: `/category/${category.fieldValue}`,
    component: categoryTemplate,
    context: {
      category: category.fieldValue,
    },
  })
})
```

<br />

ì¶”ê°€ë¡œ `/category` ê²½ë¡œì— ëŒ€í•œ í˜ì´ì§€ê°€ í•„ìš”í•˜ë©´ `/src/pages/category.js`ì—ì„œ ì‘ì—…í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

[ê´€ë ¨ ë§í¬](https://www.gatsbyjs.com/docs/adding-tags-and-categories-to-blog-posts/#make-a-tags-index-page-tags-that-renders-a-list-of-all-tags)

## ì¹´í…Œê³ ë¦¬ì— ê²Œì‹œíŒ ê°œìˆ˜ êµ¬í˜„í•˜ê¸°

### í›Œë¥­í•œ GraphQL

ë‹¨ìˆœíˆ ì¹´í…Œê³ ë¦¬ë§Œ êµ¬ë¶„í•˜ê¸°ì—ëŠ” ì•„ì‰¬ì›€ì´ ë§ê¸° ë•Œë¬¸ì— ì¹´í…Œê³ ë¦¬ ì˜†ì— í•´ë‹¹í•˜ëŠ” ê²Œì‹œíŒ ê°œìˆ˜ë¥¼ ë³´ì—¬ì£¼ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ì´ ë˜í•œ, GraphQLë¥¼ í†µí•´ ì¹´í…Œê³ ë¦¬ë³„ë¡œ í•´ë‹¹í•˜ëŠ” ê²Œì‹œë¬¼ ê°œìˆ˜ì˜ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/adding-category-to-gatsby/images/graphql-category-count.png"
  alt="graphql-category-count"
/>

ê²Œì‹œë¬¼ ê°œìˆ˜ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆìœ¼ë‹ˆ queryì—ì„œ í•´ë‹¹ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ë©´ ë©ë‹ˆë‹¤.

<br />

í•˜ì§€ë§Œ í˜ì´ì§€ì—ì„œ ì¹´í…Œê³ ë¦¬ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” ë°©ì‹ì€ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤.
í˜ì´ì§€ë¥¼ ì¶”ê°€í•  ë•Œë§ˆë‹¤ ì¹´í…Œê³ ë¦¬ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ëŠ” ë²ˆê±°ë¡œìš´ ê³¼ì •ì„ ê±°ì³ì•¼ í•  ê²ƒì…ë‹ˆë‹¤.

<br />

ê·¸ë˜ì„œ Category ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ì´ ë” ì¢‹ì„ ê²ƒì…ë‹ˆë‹¤.
ì¹´í…Œê³ ë¦¬ì— ëŒ€í•œ ê´€ì‹¬ì‚¬ë¥¼ Category ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œë§Œ ê´€ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìš©ì´í•©ë‹ˆë‹¤.

<br />

ì´ì™€ ê´€ë ¨í•´ì„œ Graphqlì—ì„œ ì§€ì›í•´ì£¼ëŠ” ê¸°ëŠ¥ì´ ìˆì—ˆìŠµë‹ˆë‹¤.
`useStaticQuery`ë¥¼ ì‚¬ìš©í•˜ë©´ í˜ì´ì§€ ë‹¨ìœ„ê°€ ì•„ë‹Œ Category ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ë°ì´í„° ì²˜ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```js
import styled from '@emotion/styled'
import { PATH } from 'constants/path'
import { graphql, Link, useStaticQuery } from 'gatsby'
import React from 'react'

interface Props {
  selectedCategory: string
}

interface CategoryPostCount {
  allMdx: {
    totalCount: number
    group: {
      totalCount: number
      fieldValue: string
    }[]
  }
}

const Category = ({ selectedCategory }: Props) => {
  const data: CategoryPostCount = useStaticQuery(graphql`
    query {
      allMdx {
        totalCount
        group(field: { frontmatter: { category: SELECT } }) {
          totalCount
          fieldValue
        }
      }
    }
  `)

  return (
    <List>
      <Item to={`${PATH.HOME}`} isactive={+(selectedCategory === 'all')}>
        All ({data.allMdx.totalCount})
      </Item>

      {data.allMdx.group.map((category) => (
        <Item
          key={category.fieldValue}
          to={`${PATH.CATEGORY}${category.fieldValue}`}
          isactive={+(selectedCategory === category.fieldValue)}
        >
          {category.fieldValue} ({category.totalCount})
        </Item>
      ))}
    </List>
  )
}

export default Category

const List = styled.nav`
  display: flex;
  justify-content: space-around;
  flex-wrap: wrap;
  gap: 10px;
  width: 100%;
  height: 100%;
  padding: 20px;
  border-bottom: 1px solid ${({ theme }) => theme.colors.secondary.base};
`

const Item = styled(Link)<{ isactive: number }>`
  height: 100%;
  text-align: center;
  transition: 0.3s;
  color: ${({ theme, isactive }) => isactive && theme.colors.secondary.dark};
  &:hover {
    color: ${({ theme }) => theme.colors.secondary.dark};
  }
`
```

## ë§ˆë¬´ë¦¬

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/adding-category-to-gatsby/images/category.gif"
  alt="category"
/>

ì´ë ‡ê²Œ Gastbyì—ì„œ ì¹´í…Œê³ ë¦¬ë¥¼ êµ¬í˜„í•œ ê³¼ì •ì— ëŒ€í•´ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤.

ì´ë²ˆ ê¸€ì„ í†µí•´ Gatsbyì—ì„œ ì¹´í…Œê³ ë¦¬ë¥¼ êµ¬í˜„í•˜ë ¤ëŠ” ë¶„ë“¤ì—ê²Œ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ í•©ë‹ˆë‹¤.ğŸ™‡â€â™‚ï¸
