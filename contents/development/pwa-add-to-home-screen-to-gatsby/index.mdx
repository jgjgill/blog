---
title: 'Gatsby - PWA A2HS ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°'
description: 'PWAì˜ A2HSì™€ ê´€ë ¨ëœ ì‘ì—…ì„ í•˜ë©´ì„œ ê²ªì€ ê³¼ì •ì„ ì •ë¦¬í•©ë‹ˆë‹¤.'
date: '2023-04-30'
slug: 'pwa-add-to-home-screen-to-gatsby'
thumbnail: './images/a2hs-thumbnail.png'
thumbnail_alt: 'a2hs-thumbnail'
category: 'development'
type: 'post'
---

# Gastby Blog ì œì‘ê¸°

<Callout>
  ğŸ’¡ Gatsbyì—ì„œ A2HSì™€ ê´€ë ¨ëœ ì‘ì—… ë‚´ìš©ê³¼ ë¦¬íŒ©í† ë§ ê³¼ì •ì„ ë‚¨ê¸°ê³ ì í•©ë‹ˆë‹¤. í”¼ë“œë°±ì€ ì–¸ì œë‚˜
  í™˜ì˜ì…ë‹ˆë‹¤:)
</Callout>

## A2HS ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°

A2HSëŠ” **Add to home screen** ì„ ì§€ì¹­í•˜ëŠ” ê²ƒìœ¼ë¡œ í™ˆ í™”ë©´ì— ì›¹ ì•±ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
ê·¸ë˜ì„œ ê¸°ì¡´ì—ëŠ” ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì €ì— ì§ì ‘ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì„œ ë“¤ì–´ì™€ì•¼ í–ˆë‹¤ë©´ A2HSë¥¼ ì ìš©í•˜ë©´ ê°„í¸í•˜ê²Œ í™ˆì— ì¶”ê°€ëœ ì•±ì„ í†µí•´ ì‚¬ìš©ìì˜ ì ‘ê·¼ì„ ë¹ ë¥´ê²Œ ìœ ë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

A2HSë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ëª‡ ê°€ì§€ ì¡°ê±´ì´ í•„ìš”í•©ë‹ˆë‹¤.
HTTPSê°€ ì ìš©ë˜ì–´ì•¼ í•˜ê³  manifest íŒŒì¼ê³¼ ì•„ì´ì½˜, ì„œë¹„ìŠ¤ ì›Œì»¤ê°€ ë“±ë¡ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
í•´ë‹¹ ê¸€ì—ì„œëŠ” manifestì™€ ì„œë¹„ìŠ¤ ì›Œì»¤ë¥¼ ì ìš©í•˜ëŠ” ê³¼ì •ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

### gatsby-plugin-manifest

gatsbyì—ì„œëŠ” manifest êµ¬ì„±ì„ ë„ì™€ì£¼ëŠ” **gatsby-plugin-manifest** í”ŒëŸ¬ê·¸ì¸ì„ í†µí•´ A2HS ê¸°ëŠ¥ì„ ì†ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
`yarn add gatsby-plugin-manifest`ì„ í†µí•´ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•˜ê³  í”ŒëŸ¬ê·¸ì¸ì— ëŒ€í•œ ì˜µì…˜ì„ ì§€ì •í•˜ë©´ ë©ë‹ˆë‹¤.

**gatsby-config.js**

```js
    {
      resolve: `gatsby-plugin-manifest`,
      options: {
        name: `jgjgill-blog`,
        short_name: `jgjgill-blog`,
        start_url: `/`,
        background_color: `#f0abfc`,
        theme_color: `#c471f5`,
        display: `standalone`,
        icon: 'src/images/icon.png',
        cache_busting_mode: 'none',
        icon_options: {
          // For all the options available,
          // please see the section "Additional Resources" below.
          purpose: `any maskable`,
        },
      },
    },
```

ê´€ë ¨ëœ ì†ì„±ë“¤ì— ëŒ€í•œ ì„¤ëª…ì€ [í•´ë‹¹ ë¬¸ì„œ](https://web.dev/add-manifest/)ì—ì„œ ìì„¸íˆ ì„¤ëª…ë˜ì–´ ìˆì–´ì„œ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤.

### gatsby-plugin-offline

ì„œë¹„ìŠ¤ ì›Œì»¤ì™€ ê´€ë ¨í•´ì„œëŠ” **gatsby-plugin-offline**ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ë©´ manifest íŒŒì¼ì´ ì„œë¹„ìŠ¤ ì›Œì»¤ì— í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`yarn add gatsby-plugin-offline` ì„¤ì¹˜ í›„ í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•˜ì‹œë©´ ë˜ëŠ”ë°,
ì—¬ê¸°ì„œ ì£¼ì˜í•  ì ì€ `gatsby-plugin-offline` í”ŒëŸ¬ê·¸ì¸ì€ `gatsby-plugin-manifest` ë³´ë‹¤ **ë’¤ì— ìœ„ì¹˜**í•´ì•¼ í•©ë‹ˆë‹¤.

```js
    {
      resolve: `gatsby-plugin-manifest`,
      ...options ì„¤ì • ë‚´ìš©,
    },
    // gatsby-plugin-offline: manifest.webmanifest ìºì‹œ ìƒì„±ì„ ìœ„í•´ manifest í”ŒëŸ¬ê·¸ì¸ ì´í›„ì— ìœ„ì¹˜
    {
      resolve: 'gatsby-plugin-offline',
    },
```

ë‹¤ìŒ ë‘ í”ŒëŸ¬ê·¸ì¸ì´ ì˜ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ `head` íƒœê·¸ ë‚´ë¶€ì— `manifest` ë§í¬ íƒœê·¸ê°€ ì¶”ê°€ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ì‹œê³  ê°œë°œì ë„êµ¬ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ íƒ­ì—ì„œ manifest ê´€ë ¨ ë¶€ë¶„ì„ ì‚´í´ë³´ì‹œë©´ ë©ë‹ˆë‹¤.

**ì ìš©ëœ í™”ë©´**

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/pwa-add-to-home-screen-to-gatsby/images/application-manifest.png"
  alt="application-manifest"
/>

ì˜ ì ìš©ë˜ì—ˆë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ A2HS ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.ğŸ˜‰

<div style={{display: 'flex', gap: '50px'}}>
<div style={{width: '50%'}}>
**ë°ìŠ¤í¬íƒ‘**

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/pwa-add-to-home-screen-to-gatsby/images/desktop-a2hs.gif"
  alt="desktop-a2hs"
/>
</div>

<div style={{width: '50%'}}>
**ëª¨ë°”ì¼**

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/pwa-add-to-home-screen-to-gatsby/images/mobile-a2hs.gif"
  alt="mobile-a2hs"
/>
</div>
</div>

## A2HS ê¸°ëŠ¥ ë¦¬íŒ©í† ë§í•˜ê¸°

ì•ì„  ê³¼ì •ì„ í†µí•´ PWAì—ì„œ A2HSë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ í•´ë‹¹ ê¸°ëŠ¥ë§Œìœ¼ë¡œëŠ” **ì‚¬ìš©ìì˜ ì ‘ê·¼ì„±**ì„ ë†’ì´ê¸°ëŠ” ì–´ë ¤ìš¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ëŒ€ë‹¤ìˆ˜ì˜ ì‚¬ìš©ìëŠ” PWAì—ì„œì˜ ì›¹ ì•± ê¸°ëŠ¥ì— ëŒ€í•´ ì•Œì§€ ëª»í•  ê²ƒì…ë‹ˆë‹¤.
ê·¸ë˜ì„œ A2HS ê¸°ëŠ¥ì„ ì‚¬ìš©ìì—ê²Œ ì•Œë ¤ì£¼ëŠ” ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•˜ê³ ì í•©ë‹ˆë‹¤.

### BeforeInstallPromptEvent

`BeforeInstallPromptEvent`ì€ ì‚¬ìš©ìì—ê²Œ ì›¹ ì•±ì„ ì„¤ì¹˜í•˜ë„ë¡ ìœ ë„í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ì´ë²¤íŠ¸ì…ë‹ˆë‹¤.
ì•ì„œ ì‚´í´ë³¸ A2HS ì„¤ì¹˜ ì¡°ê±´ì´ ì¶©ì¡±ë˜ì—ˆì„ ë•Œ BeforeInstallPromptEventê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.

BeforeInstallPromptEventì€ ì•„ì§ íƒ€ì…ì´ ì •ì˜ë˜ì–´ ìˆì§€ ì•Šì•„ì„œ MDNì— ì •ì˜ë˜ì–´ ìˆëŠ” [ë¬¸ì„œ](https://developer.mozilla.org/en-US/docs/Web/API/BeforeInstallPromptEvent)ë¥¼ í™•ì¸í•˜ë©° íƒ€ì… ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬ì„±í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.

```js
export interface BeforeInstallPromptEvent extends Event {
  readonly platforms: string[]
  readonly userChoice: Promise<{
    outcome: 'accepted' | 'dismissed'
    platform: string
  }>
  prompt(): Promise<void>
}
```

êµ¬ì„±ëœ ì†ì„±ê³¼ ë©”ì„œë“œì— ëŒ€í•´ ê°„ëµí•˜ê²Œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

ë©”ì„œë“œì—ì„œëŠ” `prompt`ë¥¼ í†µí•´ ì‚¬ìš©ìì—ê²Œ ì„¤ì¹˜ì°½ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

`userChoice`ì€ `prompt`ë¡œ ë³´ì—¬ì§„ ì„¤ì¹˜ì°½ì—ì„œ ì‚¬ìš©ìì˜ ì„ íƒì— ë”°ë¼ `outcome`ì„ í†µí•´ accepted í˜¹ì€ dismissedë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

`platforms`ì€ ì´ë²¤íŠ¸ê°€ ë°œìƒë˜ëŠ” í”Œë«í¼ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ex) ['web', 'android', 'windows']

ì´ëŸ¬í•œ íë¦„ì„ ë°”íƒ•ìœ¼ë¡œ ì½”ë“œë¥¼ êµ¬í˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

**useA2HS.ts**

```js
import { useEffect, useState } from 'react'
import { BeforeInstallPromptEvent } from 'types/custom'

export default function useA2HS() {
  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(
    null,
  )

  const install = () => {
    if (deferredPrompt === null) return

    deferredPrompt.prompt()
    deferredPrompt.userChoice.then(() => setDeferredPrompt(null))
  }

  const clearPrompt = () => {
    setDeferredPrompt(null)
  }

  useEffect(() => {
    const handler = (e: BeforeInstallPromptEvent) => {
      e.preventDefault()
      setDeferredPrompt(e)
    }

    window.addEventListener('beforeinstallprompt', handler as any)
    return () => {
      window.removeEventListener('beforeinstallprompt', handler as any)
    }
  }, [])

  return { deferredPrompt, install, clearPrompt }
}
```

**A2HS.tsx**

```js
import useA2HS from 'hooks/useA2HS'
import React from 'react'

import { Flex, Text } from './@shared'

const A2HS = () => {
  const { deferredPrompt, install, clearPrompt } = useA2HS()

  if (!deferredPrompt) return null

  return (
    <div>
      <button type="button" onClick={install}>
        ì¶”ê°€
      </button>
      <button type="button" onClick={clearPrompt}>
        ì·¨ì†Œ
      </button>
    </div>
  )
}

export default A2HS
```

ì»´í¬ë„ŒíŠ¸ì™€ ê´€ë ¨í•´ì„œ ìŠ¤íƒ€ì¼ì´ ì¶”ê°€ëœ í™”ë©´ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/pwa-add-to-home-screen-to-gatsby/images/beforeinstallpromptevent.gif"
  alt="beforeinstallpromptevent"
/>

### ì·¨ì†Œ ì´ë²¤íŠ¸ ë°œìƒ í›„ ì¼ì • ì‹œê°„ ì•ˆë³´ì´ê²Œ í•˜ê¸°

ì„¤ì¹˜ì°½ì—ì„œ ì‚¬ìš©ìê°€ ì·¨ì†Œë¥¼ ëˆŒë €ì„ ë•Œ ì¼ì • ì‹œê°„ ì•ˆë³´ì´ê²Œ í•˜ëŠ” ê²ƒì´ í•„ìš”í•©ë‹ˆë‹¤.
`localstorage`ì™€ `new Date`ë¥¼ í™œìš©í•˜ì—¬ ì ì ˆíˆ ì‹œê°„ì„ ê³„ì‚°í•˜ë©´ ë˜ê² ë„¤ìš”.
í•´ë‹¹ ë¶€ë¶„ì€ í´ë˜ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ì½”ë“œì˜ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

**a2hs.ts**

```js
export class a2hs {
  // localStorage í‚¤ê°’
  private static HIDE_INSTALL_A2HS = 'hide_install_a2hs'

  // localStorage ê°’ ê°€ì ¸ì˜¤ê¸°
  static get hideInstallA2HS() {
    return localStorage.getItem(this.HIDE_INSTALL_A2HS)
  }

  // localStorageì— ì €ì¥ëœ ê°’ì´ í˜„ì¬ ì‹œê°„ë³´ë‹¤ í° ê²½ìš° (ìˆ¨ê²¨ì•¼ í•˜ëŠ” ê²½ìš°) true ë°˜í™˜
  static get isValidateHideInstallA2HS() {
    return Number(a2hs.hideInstallA2HS) > Date.now()
  }

  // ì¼ì£¼ì¼ í›„ ê¸°ì¤€ìœ¼ë¡œ localStorage ê°’ ì„¤ì •
  static setHideInstallA2HS() {
    const currentAfterWeek = String(new Date().setDate(new Date().getDate() + 7))
    localStorage.setItem(this.HIDE_INSTALL_A2HS, currentAfterWeek)
  }

  // localStorageì— ì„¤ì •ëœ ê°’ì´ í˜„ì¬ ì‹œê°„ë³´ë‹¤ ì‘ì„ ë•Œ (ë³´ì—¬ì•¼ í•˜ëŠ” ê²½ìš°) localStorage ê°’ ì œê±°
  static clear() {
    localStorage.removeItem(this.HIDE_INSTALL_A2HS)
  }
}
```

**useA2HS.ts**

```js
import { useEffect, useState } from 'react'
import { BeforeInstallPromptEvent } from 'types/custom'
import { a2hs } from 'utils/a2hs'

export default function useA2HS() {
  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(
    null,
  )

  const install = () => {
    if (deferredPrompt === null) return

    deferredPrompt.prompt()
    deferredPrompt.userChoice.then(() => setDeferredPrompt(null))
  }

  const clearPrompt = () => {
    setDeferredPrompt(null)
    a2hs.setHideInstallA2HS()
  }

  useEffect(() => {
    if (a2hs.isValidateHideInstallA2HS) return

    a2hs.clear()
  }, [])

  useEffect(() => {
    if (a2hs.hideInstallA2HS) return

    const handler = (e: BeforeInstallPromptEvent) => {
      e.preventDefault()
      setDeferredPrompt(e)
    }

    window.addEventListener('beforeinstallprompt', handler as any)
    return () => {
      window.removeEventListener('beforeinstallprompt', handler as any)
    }
  }, [])

  return { deferredPrompt, install, clearPrompt }
}
```

## ì• ë‹ˆë©”ì´ì…˜ ì ìš©í•˜ê¸°

A2HS ì°½ì—ì„œ ì•„ë¬´ëŸ° ì• ë‹ˆë©”ì´ì…˜ì´ ì—†ìœ¼ë‹ˆ ë°‹ë°‹í•˜ë„¤ìš”.
ê´€ë ¨í•´ì„œ ì• ë‹ˆë©”ì´ì…˜ì„ ì¶”ê°€í•´ì£¼ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
í•´ë‹¹ ê³¼ì •ì—ì„œ ì—¬ëŸ¬ ì‹œí–‰ ì°©ì˜¤ë¥¼ ê²ªì–´ì„œ ì‘ì—… ë‚´ìš©ì„ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê²¨ë‘ê² ìŠµë‹ˆë‹¤.ğŸ˜‚

### useUnmountAnimation

í˜„ì¬ ì œê°€ êµ¬í˜„í•˜ê³ ì í•˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì€ mountì™€ unmountì˜ ê²½ìš°ì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ë™ì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤.
ì´ì™€ ê´€ë ¨í•˜ì—¬ `onTransitionEnd` ì´ë²¤íŠ¸ë¥¼ í™œìš©í•˜ê³ ì í–ˆìŠµë‹ˆë‹¤.
í•´ë‹¹ ì´ë²¤íŠ¸ëŠ” transitionì´ ì¢…ë£Œëœ í›„ì— ì‘ì—…ì„ ì§„í–‰í•˜ì—¬ unmountê°€ ë˜ê¸° ì „ ì• ë‹ˆë©”ì´ì…˜ì„ ì§„í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**useUnmountAnimation.ts**

```js
import { useEffect, useState } from 'react'

export default function useUnmountAnimation(codition: boolean) {
  const [isCompleted, setIsCompleted] = useState(false)

  const isRenderCodition = isCompleted || codition
  const triggerAnimation = isCompleted && codition

  const handleTransitionEnd = () => {
    if (!codition) setIsCompleted(false)
  }

  useEffect(() => {
    let timeoutId: any

    if (codition) timeoutId = setIsCompleted(true)
    return () => clearTimeout(timeoutId)
  }, [codition])

  return { isRenderCodition, handleTransitionEnd, triggerAnimation }
}
```

**A2HS.tsx**

```js
import styled from '@emotion/styled'
import useA2HS from 'hooks/useA2HS'
import useUnmountAnimation from 'hooks/useUnmountAnimation'
import React from 'react'

import { Flex, Text } from './@shared'

const A2HS = () => {
  const { deferredPrompt, install, clearPrompt } = useA2HS()
  const { isRenderCodition, handleTransitionEnd, triggerAnimation } = useUnmountAnimation(
    Boolean(deferredPrompt),
  )

  if (!isRenderCodition) return null

  return (
    <Container
      className="modal"
      onTransitionEnd={handleTransitionEnd}
      $isAnimation={triggerAnimation}
    >
      ...ë‚´ë¶€ ì½”ë“œ
    </Container>
  )
}

export default A2HS

const Container =
  styled.div <
  { $isAnimation: boolean } >
  `
  transform: ${({ $isAnimation }) => !$isAnimation && 'translateY(500px)'};
  animation: mountAnimation 1s;
  transition: background-color 0.3s, color 0.3s, transform 1s;

  @keyframes mountAnimation {
    0% {
      transform: translateY(500px);
    }
    100% {
      transform: translateY(0);
    }
  }
`
```

ì—¬ê¸°ì„œ ì €ëŠ” ì‚½ì§‘ì„ í•˜ê²Œ ë˜ì—ˆëŠ”ë°ìš”.ğŸ˜…
mountì—ì„œì˜ ì• ë‹ˆë©”ì´ì…˜ë„ useUnmountAnimationí›…ì„ í™œìš©í•˜ì—¬ ì²˜ë¦¬í•˜ì—¬ í•´ë‹¹ í›…ì˜ ì‚¬ìš©ì„±ì„ ë†’ì´ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ mount ì‹œì—ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ” ê²½ìš°ë„ ìˆì—ˆìŠµë‹ˆë‹¤.
ì œê°€ ìƒê°í•˜ê¸°ì— í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ ê·¸ë ¤ì§€ê¸° ì „ì— ì• ë‹ˆë©”ì´ì…˜ ì¡°ê±´ë„ `true`ë¡œ ë³€ê²½ë˜ëŠ” ìƒí™©ì´ ë°œìƒí•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.
ê·¸ë˜ì„œ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ ê·¸ë ¤ì§„ ë’¤ì—ëŠ” ì• ë‹ˆë©”ì´ì…˜ ì¡°ê±´ì´ ë³€ê²½ë˜ì§€ ì•Šì•„ ì• ë‹ˆë©”ì´ì…˜ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ” ê²ƒ ê°™ì•˜ìŠµë‹ˆë‹¤.
ì´ì— `setTimeout`ì„ í™œìš©í•˜ì—¬ `setIsCompleted`ë¥¼ `true`ë¡œ ë³€ê²½í•˜ëŠ” ê±¸ ì¼ë¶€ëŸ¬ ëŠ¦ì¶”ëŠ” ì‹œë„ë¥¼ í–ˆìŠµë‹ˆë‹¤.

```js
useEffect(() => {
  let timeoutId: any

  if (codition) timeoutId = setTimeout(() => setIsCompleted(true), 500)
  return () => clearTimeout(timeoutId)
}, [codition])
```

ì´ë ‡ê²Œ ì–µì§€ë¡œ mount ì‹œ ì• ë‹ˆë©”ì´ì…˜ì´ ë°œìƒë˜ëŠ” ì¡°ê±´ì„ ëŠ¦ì¶”ë©´ ì²˜ìŒ ì €ì˜ êµ¬ìƒëŒ€ë¡œ êµ¬í˜„ì€ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ ì´ ì½”ë“œëŠ” ì‚¬ìš©ì„±ì´ ë§ì´ ì œí•œë˜ì–´ ë³´ì…ë‹ˆë‹¤.
ì–µì§€ë¡œ `setTimeout`ìœ¼ë¡œ 500ìœ¼ë¡œ ëŠ¦ì¶”ëŠ”ê²Œ ë§ˆìŒì— ê±¸ë¦¬ë„¤ìš”.ğŸ˜‚

ê·¸ë˜ì„œ ê²°êµ­ mount ì‹œì—ëŠ” `keyframes`ì„ í†µí•´ ì• ë‹ˆë©”ì´ì…˜ì„ êµ¬í˜„í•˜ëŠ” ê²ƒìœ¼ë¡œ ê³„íšì„ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.

```js
animation: mountAnimation 1s;

@keyframes mountAnimation {
  0% {
    transform: translateY(500px);
  }
  100% {
    transform: translateY(0);
  }
}
```

ì‰½ê²Œ í•  ìˆ˜ ìˆì—ˆë˜ ê¸°ëŠ¥ì„ ì—¬ëŸ¬ ì‚½ì§ˆ ëì— êµ¬í˜„í•˜ì˜€ì§€ë§Œ,
í›…ì˜ ì‚¬ìš©ë„ë¥¼ ë†’ì´ê³ ì ê³ ë¯¼í–ˆë˜ ê³¼ì •ì„ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê²¨ë‘ê² ìŠµë‹ˆë‹¤.ğŸ˜…

## ë§ˆë¬´ë¦¬

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/pwa-add-to-home-screen-to-gatsby/images/a2hs.gif"
  alt="a2hs"
/>

A2HSì™€ ê´€ë ¨ëœ ì‘ì—…ì„ í•˜ë©´ì„œ **BeforeInstallPromptEvent**, **onTransitionEnd**ì™€ ê°™ì€ ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•´ ë³¼ ìˆ˜ ìˆì–´ì„œ ì¢‹ì•˜ìŠµë‹ˆë‹¤.
ë˜í•œ, ì–´ë–»ê²Œ í•˜ë©´ ì‚¬ìš©ìì˜ ì ‘ê·¼ì„ ì‰½ê²Œ ìœ ë„í•  ìˆ˜ ìˆì„ì§€ë¥¼ ì¤‘ì ì ìœ¼ë¡œ ê³ ë¯¼í•˜ë©´ì„œ ì‘ì—…í•˜ëŠ” ì‹œê°„ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.

ì´ë²ˆ ê¸€ì„ í†µí•´ A2HS ì‘ì—…ì„ í•˜ì‹œëŠ” ë¶„ë“¤ì—ê²Œ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ í•©ë‹ˆë‹¤.ğŸ™‡â€â™‚ï¸

## ì¶œì²˜

- [Add to home screen](https://developer.mozilla.org/ko/docs/Web/Progressive_web_apps/Guides/Making_PWAs_installable)
- [ì„¤ì¹˜ ì „ëµì„ ì •ì˜í•˜ëŠ” ë°©ë²•](https://web.dev/i18n/ko/define-install-strategy/)
- [BeforeInstallPromptEvent](https://developer.mozilla.org/en-US/docs/Web/API/BeforeInstallPromptEvent)
- [í™ˆ í™”ë©´ì— ì›¹ ë°”ë¡œê°€ê¸°ë¥¼ ì¶”ê°€í•˜ê¸°(A2HS)](https://fe-developers.kakaoent.com/2023/230202-a2hs/)
- [useAnimation í›…ìœ¼ë¡œ unmount ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ì— ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€í•˜ê¸°](https://medium.com/@uk960214/useanimation-%ED%9B%85%EC%9C%BC%EB%A1%9C-unmount-%EB%90%98%EB%8A%94-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EC%97%90-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0-3bc775bf8abe)
