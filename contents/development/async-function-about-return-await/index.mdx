---
title: 'ë¹„ë™ê¸° í•¨ìˆ˜ì— ëŒ€í•˜ì—¬(await, return, return await)'
description: 'ë¹„ë™ê¸° í•¨ìˆ˜ ë°˜í™˜ì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤. await, return, return awaitì˜ ì°¨ì´ë¥¼ ì´í•´í•©ë‹ˆë‹¤.'
date: '2024-01-09'
slug: 'async-function-about-return-await'
thumbnail: './images/async-function-about-return-await-thumbnail.png'
thumbnail_alt: 'Async function about return await thumbnail'
category: 'development'
type: 'post'
---

# ì–´ë–»ê²Œ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ë°˜í™˜í•  ê²ƒì¸ê°€

<Callout>ğŸ’¡ ë¹„ë™ê¸° í•¨ìˆ˜ ë°˜í™˜ì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤. í”¼ë“œë°±ì€ ì–¸ì œë‚˜ í™˜ì˜ì…ë‹ˆë‹¤:)</Callout>

```js
async function foo() {
  return await bar()
}
```

í•´ë‹¹ í•¨ìˆ˜ì—ì„œ ì´ë£¨ì–´ì§€ëŠ” ë¹„ë™ê¸°ì— ëŒ€í•œ ì´í•´ë„ë¥¼ ë†’ì´ê³ ì í•œë‹¤.

## ì˜ˆì œ ì½”ë“œ

ì´ë²ˆ ê¸€ì—ì„œëŠ” ë‹¤ìŒ ì˜ˆì œ ì½”ë“œë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤.

```js
async function resolveOrReject() {
  await new Promise((_) => setTimeout(_, 1000))

  const randomResult = Boolean(Math.round(Math.random()))

  if (randomResult) {
    return 'pass'
  } else {
    throw Error('fail')
  }
}
```

- `Promise`ë¥¼ í™œìš©í•œ ë¹„ë™ê¸°ë¡œ 1ì´ˆ ì§€ì—°í•œë‹¤.
- 50% í™•ë¥ ë¡œ ì„±ê³µê³¼ ì‹¤íŒ¨ ê°€ì •í•œë‹¤.

### ìš©ì–´ ì •ë¦¬

`resolve`ì™€ `reject`ì— ëŒ€í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•˜ê³ ì í•œë‹¤.

- `resolve` â‡’ ì´í–‰í•˜ë‹¤, ì„±ê³µí•˜ë‹¤
- `reject` â‡’ ê±°ë¶€í•˜ë‹¤, ì‹¤íŒ¨í•˜ë‹¤

## ë“¤ì–´ê°€ê¸°

### ì¼ë°˜ì  í˜¸ì¶œ

```js
async function foo() {
  try {
    resolveOrReject() // ì•„ë¬´ ì‘ì—…ì´ ì´ë£¨ì–´ì§€ ì•Šì€ ìƒíƒœ
  } catch (err) {
    return 'caught'
  }
}
```

<Video
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/async-function-about-return-await/videos/just-calling.mov"
  alt="ì¼ë°˜ì  í˜¸ì¶œ"
/>

- `Promise`ì˜ ë¹„ë™ê¸° ë™ì‘, 1ì´ˆë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•ŠëŠ”ë‹¤.
- í˜¸ì¶œ ê²°ê³¼ë¡œ ì´í–‰/ê±°ë¶€ì™€ ìƒê´€ì—†ì´ í•­ìƒ `undefined` ë‚˜ì˜¨ë‹¤.
- **ë¹„ë™ê¸°ì— ëŒ€í•œ ì œì–´ê¶Œì´ ì—†ê¸°ì— ì‹¤íŒ¨ì— ëŒ€í•œ ì²˜ë¦¬ê°€ ë¶ˆê°€ëŠ¥**í•˜ë‹¤.

### await í˜¸ì¶œ

```js
async function foo() {
  try {
    await resolveOrReject() // await ì¶”ê°€í•œ ìƒíƒœ
  } catch (err) {
    return 'caught'
  }
}
```

<Video
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/async-function-about-return-await/videos/awaiting.mov"
  alt="await í˜¸ì¶œ"
/>

- `Promise`ì˜ ë¹„ë™ê¸° ë™ì‘, 1ì´ˆë¥¼ ê¸°ë‹¤ë¦°ë‹¤.
- í˜¸ì¶œ ê²°ê³¼ë¡œ ì´í–‰ ì‹œì—ëŠ” `undefined` ê±°ë¶€ ì‹œì—ëŠ” `caught` ê°€ ë‚˜ì˜¨ë‹¤.
- `resolveOrReject` ì˜ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ê¸° ë•Œë¬¸ì— ì‹¤íŒ¨ì— ëŒ€í•œ ì²˜ë¦¬ëŠ” ê°€ëŠ¥í•˜ë‹¤.
- í•˜ì§€ë§Œ **ì´í–‰ë˜ëŠ” ê°’ì€ ë°›ì§€ ëª»í•´ ì„±ê³µí•  ë•Œ `undefined` ê°€ ë‚˜ì˜¤ëŠ” ìƒí™©**ì´ë‹¤.

### return í˜¸ì¶œ

```js
async function foo() {
  try {
    return resolveOrReject() // return ì¶”ê°€í•œ ìƒíƒœ
  } catch (err) {
    return 'caught'
  }
}
```

<Video
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/async-function-about-return-await/videos/returning.mov"
  alt="return í˜¸ì¶œ"
/>

- `Promise`ì˜ ë¹„ë™ê¸° ë™ì‘, 1ì´ˆë¥¼ ê¸°ë‹¤ë¦°ë‹¤.
- í˜¸ì¶œ ê²°ê³¼ë¡œ ì´í–‰ ì‹œì—ëŠ” `pass` ê±°ë¶€ ì‹œì—ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
- ì´ëŠ” **`resolveOrReject` ê²°ê³¼ê°€ ë°”ë¡œ ë°˜í™˜**ë˜ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.
- `foo` í•¨ìˆ˜ì—ì„œ **ì˜ë„í•œ ì‹¤íŒ¨ì— ëŒ€í•œ `catch` ê°€ ì´ë£¨ì–´ì§€ì§€ ëª»í•˜ê³  ìˆëŠ” ìƒí™©**ì´ë‹¤.

#### async/awaitì€ Promiseë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ë¬¸ë²•ì  ì„¤íƒ•

ì—¬ê¸°ì„œ `return` ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ë° `Promise`ì˜ ë¹„ë™ê¸° ë™ì‘ì´ ê°€ëŠ¥í•œ ë¶€ë¶„ì´ ì˜ë¬¸ì¼ ìˆ˜ ìˆë‹¤.

**syntactic sugar**

> The term "syntactic sugar" suggests that these language constructs are like sugar-coating on top of the standard syntax,
> making it more palatable or visually appealing.
> The goal is to simplify common tasks and reduce the verbosity of code.

`syntactic sugar` ë¼ëŠ” ìš©ì–´ëŠ” í‘œì¤€ êµ¬ë¬¸ ìœ„ì— ì„¤íƒ•ì„ ì…íŒ ê²ƒê³¼ ê°™ì´ ë” ë§›ìˆê±°ë‚˜ ì‹œê°ì ìœ¼ë¡œ ë§¤ë ¥ì ì¸ ì–¸ì–´ êµ¬ì¡°ë¥¼ ì˜ë¯¸í•œë‹¤.
ì´ë¥¼ í†µí•´ **ì‘ì—…ì„ ë‹¨ìˆœí™”í•˜ê³  ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ë§Œë“œëŠ” ê²ƒ**ì„ ëª©í‘œë¡œ í•œë‹¤.

<br />

`async/await`ì€ `Promise`ë¥¼ ê¸°ë°˜ `syntactic sugar` ìœ¼ë¡œ ë” í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ë¬¸ë²•ì´ë‹¤.
ê·¸ë˜ì„œ `async function` ì„ ì–¸ìœ¼ë¡œ í•˜ë‚˜ì˜ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ì •ì˜í•  ë•Œ **ì•”ì‹œì ìœ¼ë¡œ `Promise` ë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ê³¼ë¥¼ ë°˜í™˜**í•œë‹¤.

<Image
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/async-function-about-return-await/images/async-function-promise.png"
  alt="ë¹„ë™ê¸° í•¨ìˆ˜ Promise ë°˜í™˜"
/>

ì½”ë“œë¡œ ì‚´í´ë³´ì.

ë‹¤ìŒ ë‘ ì½”ë“œëŠ” ë™ì¼í•˜ê²Œ ë™ì‘í•œë‹¤.

```js
async function foo() {
  return 1
}
```

```js
function foo() {
  return Promise.resolve(1)
}
```

ì•ì„œ `await`ë§Œ í˜¸ì¶œí•œ ê²½ìš°ë„ ë‹¤ìŒê³¼ ê°™ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.

```js
async function foo() {
  await 1
}
```

```js
function foo() {
  return Promise.resolve(1).then(() => undefined)
}
```

ë”°ë¼ì„œ `return`ë§Œ í˜¸ì¶œí•œ `async` í•¨ìˆ˜ì—ì„œë„ ë¹„ë™ê¸° ë™ì‘ì´ ê°€ëŠ¥í•œ ê²ƒì´ë‹¤.

### return await í˜¸ì¶œ

```js
async function foo() {
  try {
    return await resolveOrReject() // return await ì¶”ê°€í•œ ìƒíƒœ
  } catch (err) {
    return 'caught'
  }
}
```

<Video
  src="https://raw.githubusercontent.com/jgjgill/blog/main/contents/development/async-function-about-return-await/videos/return-awaiting.mov"
  alt="return await í˜¸ì¶œ"
/>

- `Promise`ì˜ ë¹„ë™ê¸° ë™ì‘, 1ì´ˆë¥¼ ê¸°ë‹¤ë¦°ë‹¤.
- í˜¸ì¶œ ê²°ê³¼ë¡œ **ì´í–‰ ì‹œì—ëŠ” `pass` ê±°ë¶€ ì‹œì—ëŠ” `caught`** ê°€ ë‚˜ì˜¨ë‹¤.
- `resolveOrReject` ê²°ê³¼ë„ ê¸°ë‹¤ë ¤ì„œ ê±°ë¶€ ì‹œ `throw` ê°€ ë°œìƒí•œë‹¤.
- ì´ê²ƒì´ `catch`ë¡œ ë„˜ì–´ê°€ `caught` ê¹Œì§€ ì •ìƒì ìœ¼ë¡œ í˜¸ì¶œë˜ëŠ” ìƒí™©ì´ë‹¤.

#### return awaitì´ í•­ìƒ ì˜³ì€ê°€?

í•­ìƒ ì˜³ë‹¤ê³ ëŠ” í•  ìˆ˜ ì—†ë‹¤.
ì´ì™€ ê´€ë ¨í•´ì„œ [eslint ê·œì¹™(no-return-await)](https://eslint.org/docs/latest/rules/no-return-await)ì„ ì°¸ê³ í•  ìˆ˜ ìˆë‹¤.

<br />

ì•ì„œ ë¹„ë™ê¸° í•¨ìˆ˜(`async function`)ì˜ ë™ì‘ì—ì„œë„ ì•Œì•„ë´¤ë“¯ì´ ë¹„ë™ê¸° í•¨ìˆ˜ëŠ” ì•”ì‹œì ìœ¼ë¡œ `Promise`ë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.
ê·¸ë˜ì„œ ëŒ€ê¸° ì¤‘ì¸ í”„ë¡œë¯¸ìŠ¤ë¥¼ í•´ê²°í•  ë•Œê¹Œì§€ í˜¸ì¶œ ìŠ¤íƒì— í˜„ì¬ í•¨ìˆ˜ê°€ ìœ ì§€ëœë‹¤.
ì´ë•Œ ì™¸ë¶€ í”„ë¡œë¯¸ìŠ¤ë¥¼ í•´ê²°í•˜ê¸° ì „ì— ì¶”ê°€ ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ê°€ í•„ìš”í•˜ê²Œ ëœë‹¤.

<br />

í•˜ì§€ë§Œ ë¦°íŠ¸ ê·œì¹™ì´ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì´ìœ ì—ì„œ ì„¤ëª…í–ˆë“¯ì´ ì´ì™€ ê´€ë ¨ëœ ì„±ëŠ¥ì ì¸ ë¶€ë¶„ë„ ê°œì„ ì´ ëœ ê²ƒ ê°™ë‹¤.
ì´ì œ ìë°”ìŠ¤í¬ë¦½ì—ì„œ ë„¤ì´í‹°ë¸Œ `Promise`ê°€ ë‹¤ë¥´ê²Œ ì²˜ë¦¬ëœë‹¤ê³  í•œë‹¤.
([V8 ê´€ë ¨ ë¬¸ì„œ](https://v8.dev/blog/fast-async))

- the removal of two extra microticks
- the removal of theÂ `throwaway`Â promise.

ê·¸ë˜ì„œ ëŒ€ê¸° ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒë³´ë‹¤ ì œê±°í•˜ëŠ” ê²ƒì´ ë” ëŠë ¤ì§ˆ ìˆ˜ ìˆëŠ” ìƒí™©ì´ë¼ê³  ì„¤ëª…í•œë‹¤.

<br />

ì •ë¦¬í•˜ë©´ **`return await`ì€ `try catch` êµ¬ë¬¸ì—ì„œ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ì˜ ì˜¤ë¥˜ë¥¼ ì¡ì„ ë•Œ ì‚¬ìš©í•˜ë©´ ì¢‹ë‹¤.**

### ë§ˆë¬´ë¦¬

```js
async function foo() {
  return await bar()
}
```

ì²˜ìŒê³¼ ë¹„êµí–ˆì„ ë•Œ ì´ í•¨ìˆ˜ê°€ êµ‰ì¥íˆ ë‹¤ë¥´ê²Œ ëŠê»´ì§ˆ ê²ƒì´ë‹¤. ğŸ§

## ì°¸ê³  ìë£Œ

- [await vs return vs return await](https://jakearchibald.com/2017/await-vs-return-vs-return-await/)
- [no return, await, return, await return ì˜ ì°¨ì´](https://yceffort.kr/2021/02/run-await-return-return-await)
- [no-return-await](https://eslint.org/docs/latest/rules/no-return-await)
- [async function](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/async_function)
